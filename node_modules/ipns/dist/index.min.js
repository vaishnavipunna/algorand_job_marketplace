(function (root, factory) {(typeof module === 'object' && module.exports) ? module.exports = factory() : root.Ipns = factory()}(typeof self !== 'undefined' ? self : this, function () {
"use strict";var Ipns=(()=>{var Uc=Object.create;var Ur=Object.defineProperty;var Lc=Object.getOwnPropertyDescriptor;var Dc=Object.getOwnPropertyNames;var Rc=Object.getPrototypeOf,Nc=Object.prototype.hasOwnProperty;var kc=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),mt=(e,t)=>{for(var r in t)Ur(e,r,{get:t[r],enumerable:!0})},ui=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of Dc(t))!Nc.call(e,o)&&o!==r&&Ur(e,o,{get:()=>t[o],enumerable:!(n=Lc(t,o))||n.enumerable});return e};var Kc=(e,t,r)=>(r=e!=null?Uc(Rc(e)):{},ui(t||!e||!e.__esModule?Ur(r,"default",{value:e,enumerable:!0}):r,e)),Oc=e=>ui(Ur({},"__esModule",{value:!0}),e);var fa=kc(($m,Yo)=>{var Hm=(function(){typeof Yo<"u"&&(Yo.exports=v);var e=86400,t=3200,r=146097*t/400,n=e*r,o=1e3*n,i=864e13,s=4294967296,a=1e6,c="000000000",d=Math.trunc||function(h){var p=h-h%1;return p==0&&(h<0||h===0&&1/h!=1/0)?-0:p},u=v.prototype,f=(v.fromDate=function(h){return new v(+h)},v.fromInt64BE=D(0,1,2,3,0,4),v.fromInt64LE=D(3,2,1,0,4,0),v.fromString=function(U){var p,_=new v,U=(U+="").replace(/^\s*[+\-]?\d+/,function(m){var m=+m,y=1970+(m-1970)%400;return _.year=m-y,y}).replace(/(?:Z|([+\-]\d{2}):?(\d{2}))$/,function(A,m,y){return m<0&&(y*=-1),p=6e4*(60*+m+ +y),""}).replace(/\.\d+$/,function(A){return _.nano=+(A+c).substr(1,9),""}).split(/\D+/);if(1<U.length?U[1]--:U[1]=0,_.time=p=Date.UTC.apply(Date,U)-(p||0),isNaN(p))throw new TypeError("Invalid Date");return B(_)},v.fromTimeT=function(h){return I(h,0)},u.year=0,u.time=0,u.nano=0,u.addNano=function(h){return this.nano+=+h||0,this},u.getNano=function(){var h=B(this);return(h.time%1e3*a+ +h.nano+1e9)%1e9},u.getTimeT=function(){var p=B(this),h=Math.floor(p.time/1e3),p=p.year;return p&&(h+=p*r*e/t),h},u.getYear=function(){return this.toDate().getUTCFullYear()+this.year},u.toDate=function(){return b(B(this).time)},u.toJSON=function(){return this.toString().replace(/0{1,6}Z$/,"Z")},u.toString=function(h){var p=this,_=p.toDate(),U={H:function(){return M(_.getUTCHours())},L:function(){return F(_.getUTCMilliseconds(),3)},M:function(){return M(_.getUTCMinutes())},N:function(){return F(p.getNano(),9)},S:function(){return M(_.getUTCSeconds())},Y:function(){var A=p.getYear();return 999999<A?"+"+A:9999<A?"+"+F(A,6):0<=A?F(A,4):-999999<=A?"-"+F(-A,6):A},a:function(){return C[_.getUTCDay()]},b:function(){return w[_.getUTCMonth()]},d:function(){return M(_.getUTCDate())},e:function(){return(function(A){return(9<A?"":" ")+(0|A)})(_.getUTCDate())},m:function(){return M(_.getUTCMonth()+1)}};return(function A(m){return m.replace(/%./g,function(y){var E=y[1],l=x[E],E=U[E];return l?A(l):E?E():y})})(h||f)},u.writeInt64BE=S(0,1,2,3,0,4),u.writeInt64LE=S(3,2,1,0,4,0),"%Y-%m-%dT%H:%M:%S.%NZ"),w=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],C=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],x={"%":"%",F:"%Y-%m-%d",n:`
`,R:"%H:%M",T:"%H:%M:%S",t:"	",X:"%T",Z:"GMT",z:"+0000"};return v;function v(h,p,_){var U=this;if(!(U instanceof v))return new v(h,p,_);U.time=+h||0,U.nano=+p||0,U.year=+_||0,B(U)}function B(h){var p,_,U,A=h.year,m=h.time,y=h.nano,l=((y<0||a<=y)&&(y-=(_=Math.floor(y/a))*a,m+=_,_=1),A%t);return(m<-i||i<m||l)&&((p=d(m/o))&&(A+=p*t,m-=p*o),(U=b(m)).setUTCFullYear(l+U.getUTCFullYear()),U=(m=+U)+(p=d((A-=l)/t))*o,p&&-i<=U&&U<=i&&(A-=p*t,m=U),_=1),_&&(h.year=A,h.time=m,h.nano=y),h}function b(h){var p=new Date(0);return p.setTime(h),p}function I(A,U){A=+A||0;var _=d((U=(U|0)*s)/n)+d(A/n),U=U%n+A%n,A=d(U/n);return A&&(_+=A,U-=A*n),new v(1e3*U,0,_*t)}function S(h,p,_,U,A,m){return function(l,E){var R=B(this);l=l||new Array(8),O(l,E|=0);var k=Math.floor(R.time/1e3),R=R.year*(r*e/t),L=d(R/s)+d(k/s),R=R%s+k%s,k=Math.floor(R/s);return k&&(L+=k,R-=k*s),y(l,E+A,L),y(l,E+m,R),l};function y(l,E,L){l[E+h]=L>>24&255,l[E+p]=L>>16&255,l[E+_]=L>>8&255,l[E+U]=255&L}}function D(h,p,_,U,A,m){return function(l,E){O(l,E|=0);var L=y(l,E+A);return I(y(l,E+m),L)};function y(l,E){return 16777216*l[E+h]+(l[E+p]<<16|l[E+_]<<8|l[E+U])}}function O(h,p){if(h=h&&h.length,h==null)throw new TypeError("Invalid Buffer");if(h<p+8)throw new RangeError("Out of range")}function M(h){return(9<h?"":"0")+(0|h)}function F(h,p){return(c+(0|h)).substr(-p)}})()});var ud={};mt(ud,{createIPNSRecord:()=>sd,createIPNSRecordWithExpiration:()=>ad,extractPublicKeyFromIPNSRecord:()=>xc,marshalIPNSRecord:()=>Ec,multihashFromIPNSRoutingKey:()=>vc,multihashToIPNSRoutingKey:()=>Ac,namespace:()=>Ic,namespaceLength:()=>id,unmarshalIPNSRecord:()=>Sc});var rt=class extends Error{static name="InvalidParametersError";constructor(t="Invalid parameters"){super(t),this.name="InvalidParametersError"}},Te=class extends Error{static name="InvalidPublicKeyError";constructor(t="Invalid public key"){super(t),this.name="InvalidPublicKeyError"}};var Lr=class extends Error{static name="InvalidMultihashError";constructor(t="Invalid Multihash"){super(t),this.name="InvalidMultihashError"}};var Dr=class extends Error{static name="UnsupportedKeyTypeError";constructor(t="Unsupported key type"){super(t),this.name="UnsupportedKeyTypeError"}};var An={};mt(An,{base58btc:()=>et,base58flickr:()=>$c});var dd=new Uint8Array(0);function fi(e,t){if(e===t)return!0;if(e.byteLength!==t.byteLength)return!1;for(let r=0;r<e.byteLength;r++)if(e[r]!==t[r])return!1;return!0}function Pt(e){if(e instanceof Uint8Array&&e.constructor.name==="Uint8Array")return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Unknown type, must be binary type")}function li(e){return new TextEncoder().encode(e)}function di(e){return new TextDecoder().decode(e)}function Vc(e,t){if(e.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var o=0;o<e.length;o++){var i=e.charAt(o),s=i.charCodeAt(0);if(r[s]!==255)throw new TypeError(i+" is ambiguous");r[s]=o}var a=e.length,c=e.charAt(0),d=Math.log(a)/Math.log(256),u=Math.log(256)/Math.log(a);function f(x){if(x instanceof Uint8Array||(ArrayBuffer.isView(x)?x=new Uint8Array(x.buffer,x.byteOffset,x.byteLength):Array.isArray(x)&&(x=Uint8Array.from(x))),!(x instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(x.length===0)return"";for(var v=0,B=0,b=0,I=x.length;b!==I&&x[b]===0;)b++,v++;for(var S=(I-b)*u+1>>>0,D=new Uint8Array(S);b!==I;){for(var O=x[b],M=0,F=S-1;(O!==0||M<B)&&F!==-1;F--,M++)O+=256*D[F]>>>0,D[F]=O%a>>>0,O=O/a>>>0;if(O!==0)throw new Error("Non-zero carry");B=M,b++}for(var h=S-B;h!==S&&D[h]===0;)h++;for(var p=c.repeat(v);h<S;++h)p+=e.charAt(D[h]);return p}function w(x){if(typeof x!="string")throw new TypeError("Expected String");if(x.length===0)return new Uint8Array;var v=0;if(x[v]!==" "){for(var B=0,b=0;x[v]===c;)B++,v++;for(var I=(x.length-v)*d+1>>>0,S=new Uint8Array(I);x[v];){var D=r[x.charCodeAt(v)];if(D===255)return;for(var O=0,M=I-1;(D!==0||O<b)&&M!==-1;M--,O++)D+=a*S[M]>>>0,S[M]=D%256>>>0,D=D/256>>>0;if(D!==0)throw new Error("Non-zero carry");b=O,v++}if(x[v]!==" "){for(var F=I-b;F!==I&&S[F]===0;)F++;for(var h=new Uint8Array(B+(I-F)),p=B;F!==I;)h[p++]=S[F++];return h}}}function C(x){var v=w(x);if(v)return v;throw new Error(`Non-${t} character`)}return{encode:f,decodeUnsafe:w,decode:C}}var Mc=Vc,Pc=Mc,pi=Pc;var bn=class{name;prefix;baseEncode;constructor(t,r,n){this.name=t,this.prefix=r,this.baseEncode=n}encode(t){if(t instanceof Uint8Array)return`${this.prefix}${this.baseEncode(t)}`;throw Error("Unknown type, must be binary type")}},wn=class{name;prefix;baseDecode;prefixCodePoint;constructor(t,r,n){this.name=t,this.prefix=r;let o=r.codePointAt(0);if(o===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=o,this.baseDecode=n}decode(t){if(typeof t=="string"){if(t.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(t)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(t.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(t){return mi(this,t)}},En=class{decoders;constructor(t){this.decoders=t}or(t){return mi(this,t)}decode(t){let r=t[0],n=this.decoders[r];if(n!=null)return n.decode(t);throw RangeError(`Unable to decode multibase string ${JSON.stringify(t)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}};function mi(e,t){return new En({...e.decoders??{[e.prefix]:e},...t.decoders??{[t.prefix]:t}})}var Sn=class{name;prefix;baseEncode;baseDecode;encoder;decoder;constructor(t,r,n,o){this.name=t,this.prefix=r,this.baseEncode=n,this.baseDecode=o,this.encoder=new bn(t,r,n),this.decoder=new wn(t,r,o)}encode(t){return this.encoder.encode(t)}decode(t){return this.decoder.decode(t)}};function Ie({name:e,prefix:t,encode:r,decode:n}){return new Sn(e,t,r,n)}function Qt({name:e,prefix:t,alphabet:r}){let{encode:n,decode:o}=pi(r,e);return Ie({prefix:t,name:e,encode:n,decode:i=>Pt(o(i))})}function Fc(e,t,r,n){let o=e.length;for(;e[o-1]==="=";)--o;let i=new Uint8Array(o*r/8|0),s=0,a=0,c=0;for(let d=0;d<o;++d){let u=t[e[d]];if(u===void 0)throw new SyntaxError(`Non-${n} character`);a=a<<r|u,s+=r,s>=8&&(s-=8,i[c++]=255&a>>s)}if(s>=r||(255&a<<8-s)!==0)throw new SyntaxError("Unexpected end of data");return i}function qc(e,t,r){let n=t[t.length-1]==="=",o=(1<<r)-1,i="",s=0,a=0;for(let c=0;c<e.length;++c)for(a=a<<8|e[c],s+=8;s>r;)s-=r,i+=t[o&a>>s];if(s!==0&&(i+=t[o&a<<r-s]),n)for(;(i.length*r&7)!==0;)i+="=";return i}function Hc(e){let t={};for(let r=0;r<e.length;++r)t[e[r]]=r;return t}function J({name:e,prefix:t,bitsPerChar:r,alphabet:n}){let o=Hc(n);return Ie({prefix:t,name:e,encode(i){return qc(i,n,r)},decode(i){return Fc(i,o,r,e)}})}var et=Qt({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),$c=Qt({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var vn={};mt(vn,{base32:()=>te,base32hex:()=>Yc,base32hexpad:()=>Xc,base32hexpadupper:()=>Wc,base32hexupper:()=>jc,base32pad:()=>Zc,base32padupper:()=>Gc,base32upper:()=>zc,base32z:()=>Jc});var te=J({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),zc=J({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),Zc=J({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),Gc=J({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),Yc=J({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),jc=J({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),Xc=J({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),Wc=J({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),Jc=J({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var Bn={};mt(Bn,{base36:()=>ee,base36upper:()=>Qc});var ee=Qt({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),Qc=Qt({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var tu=xi,yi=128,eu=127,ru=~eu,nu=Math.pow(2,31);function xi(e,t,r){t=t||[],r=r||0;for(var n=r;e>=nu;)t[r++]=e&255|yi,e/=128;for(;e&ru;)t[r++]=e&255|yi,e>>>=7;return t[r]=e|0,xi.bytes=r-n+1,t}var ou=Cn,iu=128,gi=127;function Cn(e,n){var r=0,n=n||0,o=0,i=n,s,a=e.length;do{if(i>=a)throw Cn.bytes=0,new RangeError("Could not decode varint");s=e[i++],r+=o<28?(s&gi)<<o:(s&gi)*Math.pow(2,o),o+=7}while(s>=iu);return Cn.bytes=i-n,r}var su=Math.pow(2,7),au=Math.pow(2,14),cu=Math.pow(2,21),uu=Math.pow(2,28),fu=Math.pow(2,35),lu=Math.pow(2,42),du=Math.pow(2,49),hu=Math.pow(2,56),pu=Math.pow(2,63),mu=function(e){return e<su?1:e<au?2:e<cu?3:e<uu?4:e<fu?5:e<lu?6:e<du?7:e<hu?8:e<pu?9:10},yu={encode:tu,decode:ou,encodingLength:mu},gu=yu,er=gu;function rr(e,t=0){return[er.decode(e,t),er.decode.bytes]}function _e(e,t,r=0){return er.encode(e,t,r),t}function Ue(e){return er.encodingLength(e)}function Kt(e,t){let r=t.byteLength,n=Ue(e),o=n+Ue(r),i=new Uint8Array(o+r);return _e(e,i,0),_e(r,i,n),i.set(t,o),new Le(e,r,t,i)}function Nr(e){let t=Pt(e),[r,n]=rr(t),[o,i]=rr(t.subarray(n)),s=t.subarray(n+i);if(s.byteLength!==o)throw new Error("Incorrect length");return new Le(r,o,s,t)}function bi(e,t){if(e===t)return!0;{let r=t;return e.code===r.code&&e.size===r.size&&r.bytes instanceof Uint8Array&&fi(e.bytes,r.bytes)}}var Le=class{code;size;digest;bytes;constructor(t,r,n,o){this.code=t,this.size=r,this.digest=n,this.bytes=o}};function wi(e,t){let{bytes:r,version:n}=e;switch(n){case 0:return bu(r,Tn(e),t??et.encoder);default:return wu(r,Tn(e),t??te.encoder)}}var Ei=new WeakMap;function Tn(e){let t=Ei.get(e);if(t==null){let r=new Map;return Ei.set(e,r),r}return t}var ct=class e{code;version;multihash;bytes;"/";constructor(t,r,n,o){this.code=r,this.version=t,this.multihash=n,this.bytes=o,this["/"]=o}get asCID(){return this}get byteOffset(){return this.bytes.byteOffset}get byteLength(){return this.bytes.byteLength}toV0(){switch(this.version){case 0:return this;case 1:{let{code:t,multihash:r}=this;if(t!==nr)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(r.code!==Eu)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return e.createV0(r)}default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}toV1(){switch(this.version){case 0:{let{code:t,digest:r}=this.multihash,n=Kt(t,r);return e.createV1(this.code,n)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 1. This is a bug please report`)}}equals(t){return e.equals(this,t)}static equals(t,r){let n=r;return n!=null&&t.code===n.code&&t.version===n.version&&bi(t.multihash,n.multihash)}toString(t){return wi(this,t)}toJSON(){return{"/":wi(this)}}link(){return this}[Symbol.toStringTag]="CID";[Symbol.for("nodejs.util.inspect.custom")](){return`CID(${this.toString()})`}static asCID(t){if(t==null)return null;let r=t;if(r instanceof e)return r;if(r["/"]!=null&&r["/"]===r.bytes||r.asCID===r){let{version:n,code:o,multihash:i,bytes:s}=r;return new e(n,o,i,s??Si(n,o,i.bytes))}else if(r[Su]===!0){let{version:n,multihash:o,code:i}=r,s=Nr(o);return e.create(n,i,s)}else return null}static create(t,r,n){if(typeof r!="number")throw new Error("String codecs are no longer supported");if(!(n.bytes instanceof Uint8Array))throw new Error("Invalid digest");switch(t){case 0:{if(r!==nr)throw new Error(`Version 0 CID must use dag-pb (code: ${nr}) block encoding`);return new e(t,r,n,n.bytes)}case 1:{let o=Si(t,r,n.bytes);return new e(t,r,n,o)}default:throw new Error("Invalid version")}}static createV0(t){return e.create(0,nr,t)}static createV1(t,r){return e.create(1,t,r)}static decode(t){let[r,n]=e.decodeFirst(t);if(n.length!==0)throw new Error("Incorrect length");return r}static decodeFirst(t){let r=e.inspectBytes(t),n=r.size-r.multihashSize,o=Pt(t.subarray(n,n+r.multihashSize));if(o.byteLength!==r.multihashSize)throw new Error("Incorrect length");let i=o.subarray(r.multihashSize-r.digestSize),s=new Le(r.multihashCode,r.digestSize,i,o);return[r.version===0?e.createV0(s):e.createV1(r.codec,s),t.subarray(r.size)]}static inspectBytes(t){let r=0,n=()=>{let[f,w]=rr(t.subarray(r));return r+=w,f},o=n(),i=nr;if(o===18?(o=0,r=0):i=n(),o!==0&&o!==1)throw new RangeError(`Invalid CID version ${o}`);let s=r,a=n(),c=n(),d=r+c,u=d-s;return{version:o,codec:i,multihashCode:a,digestSize:c,multihashSize:u,size:d}}static parse(t,r){let[n,o]=xu(t,r),i=e.decode(o);if(i.version===0&&t[0]!=="Q")throw Error("Version 0 CID string must not include multibase prefix");return Tn(i).set(n,t),i}};function xu(e,t){switch(e[0]){case"Q":{let r=t??et;return[et.prefix,r.decode(`${et.prefix}${e}`)]}case et.prefix:{let r=t??et;return[et.prefix,r.decode(e)]}case te.prefix:{let r=t??te;return[te.prefix,r.decode(e)]}case ee.prefix:{let r=t??ee;return[ee.prefix,r.decode(e)]}default:{if(t==null)throw Error("To parse non base32, base36 or base58btc encoded CID multibase decoder must be provided");return[e[0],t.decode(e)]}}}function bu(e,t,r){let{prefix:n}=r;if(n!==et.prefix)throw Error(`Cannot string encode V0 in ${r.name} encoding`);let o=t.get(n);if(o==null){let i=r.encode(e).slice(1);return t.set(n,i),i}else return o}function wu(e,t,r){let{prefix:n}=r,o=t.get(n);if(o==null){let i=r.encode(e);return t.set(n,i),i}else return o}var nr=112,Eu=18;function Si(e,t,r){let n=Ue(e),o=n+Ue(t),i=new Uint8Array(o+r.byteLength);return _e(e,i,0),_e(t,i,n),i.set(r,o),i}var Su=Symbol.for("@ipld/js-cid/CID");var In={};mt(In,{identity:()=>me});var Ai=0,Au="identity",vi=Pt;function vu(e,t){if(t?.truncate!=null&&t.truncate!==e.byteLength){if(t.truncate<0||t.truncate>e.byteLength)throw new Error(`Invalid truncate option, must be less than or equal to ${e.byteLength}`);e=e.subarray(0,t.truncate)}return Kt(Ai,vi(e))}var me={code:Ai,name:Au,encode:vi,digest:vu};function yt(e,t){if(e===t)return!0;if(e.byteLength!==t.byteLength)return!1;for(let r=0;r<e.byteLength;r++)if(e[r]!==t[r])return!1;return!0}function Ft(e=0){return new Uint8Array(e)}function wt(e=0){return new Uint8Array(e)}function re(e,t){t==null&&(t=e.reduce((o,i)=>o+i.length,0));let r=wt(t),n=0;for(let o of e)r.set(o,n),n+=o.length;return r}var Ci=Symbol.for("@achingbrain/uint8arraylist");function Bi(e,t){if(t==null||t<0)throw new RangeError("index is out of bounds");let r=0;for(let n of e){let o=r+n.byteLength;if(t<o)return{buf:n,index:t-r};r=o}throw new RangeError("index is out of bounds")}function kr(e){return!!e?.[Ci]}var Et=class e{bufs;length;[Ci]=!0;constructor(...t){this.bufs=[],this.length=0,t.length>0&&this.appendAll(t)}*[Symbol.iterator](){yield*this.bufs}get byteLength(){return this.length}append(...t){this.appendAll(t)}appendAll(t){let r=0;for(let n of t)if(n instanceof Uint8Array)r+=n.byteLength,this.bufs.push(n);else if(kr(n))r+=n.byteLength,this.bufs.push(...n.bufs);else throw new Error("Could not append value, must be an Uint8Array or a Uint8ArrayList");this.length+=r}prepend(...t){this.prependAll(t)}prependAll(t){let r=0;for(let n of t.reverse())if(n instanceof Uint8Array)r+=n.byteLength,this.bufs.unshift(n);else if(kr(n))r+=n.byteLength,this.bufs.unshift(...n.bufs);else throw new Error("Could not prepend value, must be an Uint8Array or a Uint8ArrayList");this.length+=r}get(t){let r=Bi(this.bufs,t);return r.buf[r.index]}set(t,r){let n=Bi(this.bufs,t);n.buf[n.index]=r}write(t,r=0){if(t instanceof Uint8Array)for(let n=0;n<t.length;n++)this.set(r+n,t[n]);else if(kr(t))for(let n=0;n<t.length;n++)this.set(r+n,t.get(n));else throw new Error("Could not write value, must be an Uint8Array or a Uint8ArrayList")}consume(t){if(t=Math.trunc(t),!(Number.isNaN(t)||t<=0)){if(t===this.byteLength){this.bufs=[],this.length=0;return}for(;this.bufs.length>0;)if(t>=this.bufs[0].byteLength)t-=this.bufs[0].byteLength,this.length-=this.bufs[0].byteLength,this.bufs.shift();else{this.bufs[0]=this.bufs[0].subarray(t),this.length-=t;break}}}slice(t,r){let{bufs:n,length:o}=this._subList(t,r);return re(n,o)}subarray(t,r){let{bufs:n,length:o}=this._subList(t,r);return n.length===1?n[0]:re(n,o)}sublist(t,r){let{bufs:n,length:o}=this._subList(t,r),i=new e;return i.length=o,i.bufs=[...n],i}_subList(t,r){if(t=t??0,r=r??this.length,t<0&&(t=this.length+t),r<0&&(r=this.length+r),t<0||r>this.length)throw new RangeError("index is out of bounds");if(t===r)return{bufs:[],length:0};if(t===0&&r===this.length)return{bufs:this.bufs,length:this.length};let n=[],o=0;for(let i=0;i<this.bufs.length;i++){let s=this.bufs[i],a=o,c=a+s.byteLength;if(o=c,t>=c)continue;let d=t>=a&&t<c,u=r>a&&r<=c;if(d&&u){if(t===a&&r===c){n.push(s);break}let f=t-a;n.push(s.subarray(f,f+(r-t)));break}if(d){if(t===0){n.push(s);continue}n.push(s.subarray(t-a));continue}if(u){if(r===c){n.push(s);break}n.push(s.subarray(0,r-a));break}n.push(s)}return{bufs:n,length:r-t}}indexOf(t,r=0){if(!kr(t)&&!(t instanceof Uint8Array))throw new TypeError('The "value" argument must be a Uint8ArrayList or Uint8Array');let n=t instanceof Uint8Array?t:t.subarray();if(r=Number(r??0),isNaN(r)&&(r=0),r<0&&(r=this.length+r),r<0&&(r=0),t.length===0)return r>this.length?this.length:r;let o=n.byteLength;if(o===0)throw new TypeError("search must be at least 1 byte long");let i=256,s=new Int32Array(i);for(let f=0;f<i;f++)s[f]=-1;for(let f=0;f<o;f++)s[n[f]]=f;let a=s,c=this.byteLength-n.byteLength,d=n.byteLength-1,u;for(let f=r;f<=c;f+=u){u=0;for(let w=d;w>=0;w--){let C=this.get(f+w);if(n[w]!==C){u=Math.max(1,w-a[C]);break}}if(u===0)return f}return-1}getInt8(t){let r=this.subarray(t,t+1);return new DataView(r.buffer,r.byteOffset,r.byteLength).getInt8(0)}setInt8(t,r){let n=wt(1);new DataView(n.buffer,n.byteOffset,n.byteLength).setInt8(0,r),this.write(n,t)}getInt16(t,r){let n=this.subarray(t,t+2);return new DataView(n.buffer,n.byteOffset,n.byteLength).getInt16(0,r)}setInt16(t,r,n){let o=Ft(2);new DataView(o.buffer,o.byteOffset,o.byteLength).setInt16(0,r,n),this.write(o,t)}getInt32(t,r){let n=this.subarray(t,t+4);return new DataView(n.buffer,n.byteOffset,n.byteLength).getInt32(0,r)}setInt32(t,r,n){let o=Ft(4);new DataView(o.buffer,o.byteOffset,o.byteLength).setInt32(0,r,n),this.write(o,t)}getBigInt64(t,r){let n=this.subarray(t,t+8);return new DataView(n.buffer,n.byteOffset,n.byteLength).getBigInt64(0,r)}setBigInt64(t,r,n){let o=Ft(8);new DataView(o.buffer,o.byteOffset,o.byteLength).setBigInt64(0,r,n),this.write(o,t)}getUint8(t){let r=this.subarray(t,t+1);return new DataView(r.buffer,r.byteOffset,r.byteLength).getUint8(0)}setUint8(t,r){let n=wt(1);new DataView(n.buffer,n.byteOffset,n.byteLength).setUint8(0,r),this.write(n,t)}getUint16(t,r){let n=this.subarray(t,t+2);return new DataView(n.buffer,n.byteOffset,n.byteLength).getUint16(0,r)}setUint16(t,r,n){let o=Ft(2);new DataView(o.buffer,o.byteOffset,o.byteLength).setUint16(0,r,n),this.write(o,t)}getUint32(t,r){let n=this.subarray(t,t+4);return new DataView(n.buffer,n.byteOffset,n.byteLength).getUint32(0,r)}setUint32(t,r,n){let o=Ft(4);new DataView(o.buffer,o.byteOffset,o.byteLength).setUint32(0,r,n),this.write(o,t)}getBigUint64(t,r){let n=this.subarray(t,t+8);return new DataView(n.buffer,n.byteOffset,n.byteLength).getBigUint64(0,r)}setBigUint64(t,r,n){let o=Ft(8);new DataView(o.buffer,o.byteOffset,o.byteLength).setBigUint64(0,r,n),this.write(o,t)}getFloat32(t,r){let n=this.subarray(t,t+4);return new DataView(n.buffer,n.byteOffset,n.byteLength).getFloat32(0,r)}setFloat32(t,r,n){let o=Ft(4);new DataView(o.buffer,o.byteOffset,o.byteLength).setFloat32(0,r,n),this.write(o,t)}getFloat64(t,r){let n=this.subarray(t,t+8);return new DataView(n.buffer,n.byteOffset,n.byteLength).getFloat64(0,r)}setFloat64(t,r,n){let o=Ft(8);new DataView(o.buffer,o.byteOffset,o.byteLength).setFloat64(0,r,n),this.write(o,t)}equals(t){if(t==null||!(t instanceof e)||t.bufs.length!==this.bufs.length)return!1;for(let r=0;r<this.bufs.length;r++)if(!yt(this.bufs[r],t.bufs[r]))return!1;return!0}static fromUint8Arrays(t,r){let n=new e;return n.bufs=t,r==null&&(r=t.reduce((o,i)=>o+i.byteLength,0)),n.length=r,n}};var _n={};mt(_n,{base10:()=>Bu});var Bu=Qt({prefix:"9",name:"base10",alphabet:"0123456789"});var Un={};mt(Un,{base16:()=>Cu,base16upper:()=>Tu});var Cu=J({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),Tu=J({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var Ln={};mt(Ln,{base2:()=>Iu});var Iu=J({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var Dn={};mt(Dn,{base256emoji:()=>Ru});var Ti=Array.from("\u{1F680}\u{1FA90}\u2604\u{1F6F0}\u{1F30C}\u{1F311}\u{1F312}\u{1F313}\u{1F314}\u{1F315}\u{1F316}\u{1F317}\u{1F318}\u{1F30D}\u{1F30F}\u{1F30E}\u{1F409}\u2600\u{1F4BB}\u{1F5A5}\u{1F4BE}\u{1F4BF}\u{1F602}\u2764\u{1F60D}\u{1F923}\u{1F60A}\u{1F64F}\u{1F495}\u{1F62D}\u{1F618}\u{1F44D}\u{1F605}\u{1F44F}\u{1F601}\u{1F525}\u{1F970}\u{1F494}\u{1F496}\u{1F499}\u{1F622}\u{1F914}\u{1F606}\u{1F644}\u{1F4AA}\u{1F609}\u263A\u{1F44C}\u{1F917}\u{1F49C}\u{1F614}\u{1F60E}\u{1F607}\u{1F339}\u{1F926}\u{1F389}\u{1F49E}\u270C\u2728\u{1F937}\u{1F631}\u{1F60C}\u{1F338}\u{1F64C}\u{1F60B}\u{1F497}\u{1F49A}\u{1F60F}\u{1F49B}\u{1F642}\u{1F493}\u{1F929}\u{1F604}\u{1F600}\u{1F5A4}\u{1F603}\u{1F4AF}\u{1F648}\u{1F447}\u{1F3B6}\u{1F612}\u{1F92D}\u2763\u{1F61C}\u{1F48B}\u{1F440}\u{1F62A}\u{1F611}\u{1F4A5}\u{1F64B}\u{1F61E}\u{1F629}\u{1F621}\u{1F92A}\u{1F44A}\u{1F973}\u{1F625}\u{1F924}\u{1F449}\u{1F483}\u{1F633}\u270B\u{1F61A}\u{1F61D}\u{1F634}\u{1F31F}\u{1F62C}\u{1F643}\u{1F340}\u{1F337}\u{1F63B}\u{1F613}\u2B50\u2705\u{1F97A}\u{1F308}\u{1F608}\u{1F918}\u{1F4A6}\u2714\u{1F623}\u{1F3C3}\u{1F490}\u2639\u{1F38A}\u{1F498}\u{1F620}\u261D\u{1F615}\u{1F33A}\u{1F382}\u{1F33B}\u{1F610}\u{1F595}\u{1F49D}\u{1F64A}\u{1F639}\u{1F5E3}\u{1F4AB}\u{1F480}\u{1F451}\u{1F3B5}\u{1F91E}\u{1F61B}\u{1F534}\u{1F624}\u{1F33C}\u{1F62B}\u26BD\u{1F919}\u2615\u{1F3C6}\u{1F92B}\u{1F448}\u{1F62E}\u{1F646}\u{1F37B}\u{1F343}\u{1F436}\u{1F481}\u{1F632}\u{1F33F}\u{1F9E1}\u{1F381}\u26A1\u{1F31E}\u{1F388}\u274C\u270A\u{1F44B}\u{1F630}\u{1F928}\u{1F636}\u{1F91D}\u{1F6B6}\u{1F4B0}\u{1F353}\u{1F4A2}\u{1F91F}\u{1F641}\u{1F6A8}\u{1F4A8}\u{1F92C}\u2708\u{1F380}\u{1F37A}\u{1F913}\u{1F619}\u{1F49F}\u{1F331}\u{1F616}\u{1F476}\u{1F974}\u25B6\u27A1\u2753\u{1F48E}\u{1F4B8}\u2B07\u{1F628}\u{1F31A}\u{1F98B}\u{1F637}\u{1F57A}\u26A0\u{1F645}\u{1F61F}\u{1F635}\u{1F44E}\u{1F932}\u{1F920}\u{1F927}\u{1F4CC}\u{1F535}\u{1F485}\u{1F9D0}\u{1F43E}\u{1F352}\u{1F617}\u{1F911}\u{1F30A}\u{1F92F}\u{1F437}\u260E\u{1F4A7}\u{1F62F}\u{1F486}\u{1F446}\u{1F3A4}\u{1F647}\u{1F351}\u2744\u{1F334}\u{1F4A3}\u{1F438}\u{1F48C}\u{1F4CD}\u{1F940}\u{1F922}\u{1F445}\u{1F4A1}\u{1F4A9}\u{1F450}\u{1F4F8}\u{1F47B}\u{1F910}\u{1F92E}\u{1F3BC}\u{1F975}\u{1F6A9}\u{1F34E}\u{1F34A}\u{1F47C}\u{1F48D}\u{1F4E3}\u{1F942}"),_u=Ti.reduce((e,t,r)=>(e[r]=t,e),[]),Uu=Ti.reduce((e,t,r)=>{let n=t.codePointAt(0);if(n==null)throw new Error(`Invalid character: ${t}`);return e[n]=r,e},[]);function Lu(e){return e.reduce((t,r)=>(t+=_u[r],t),"")}function Du(e){let t=[];for(let r of e){let n=r.codePointAt(0);if(n==null)throw new Error(`Invalid character: ${r}`);let o=Uu[n];if(o==null)throw new Error(`Non-base256emoji character: ${r}`);t.push(o)}return new Uint8Array(t)}var Ru=Ie({prefix:"\u{1F680}",name:"base256emoji",encode:Lu,decode:Du});var Nn={};mt(Nn,{base64:()=>Rn,base64pad:()=>Nu,base64url:()=>ku,base64urlpad:()=>Ku});var Rn=J({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),Nu=J({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),ku=J({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),Ku=J({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var kn={};mt(kn,{base8:()=>Ou});var Ou=J({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var Kn={};mt(Kn,{identity:()=>Vu});var Vu=Ie({prefix:"\0",name:"identity",encode:e=>di(e),decode:e=>li(e)});var jd=new TextEncoder,Xd=new TextDecoder;var Pn={};mt(Pn,{sha256:()=>Mn,sha512:()=>qu});var Fu=20;function Vn({name:e,code:t,encode:r,minDigestLength:n,maxDigestLength:o}){return new On(e,t,r,n,o)}var On=class{name;code;encode;minDigestLength;maxDigestLength;constructor(t,r,n,o,i){this.name=t,this.code=r,this.encode=n,this.minDigestLength=o??Fu,this.maxDigestLength=i}digest(t,r){if(r?.truncate!=null){if(r.truncate<this.minDigestLength)throw new Error(`Invalid truncate option, must be greater than or equal to ${this.minDigestLength}`);if(this.maxDigestLength!=null&&r.truncate>this.maxDigestLength)throw new Error(`Invalid truncate option, must be less than or equal to ${this.maxDigestLength}`)}if(t instanceof Uint8Array){let n=this.encode(t);return n instanceof Uint8Array?Ii(n,this.code,r?.truncate):n.then(o=>Ii(o,this.code,r?.truncate))}else throw Error("Unknown type, must be binary type")}};function Ii(e,t,r){if(r!=null&&r!==e.byteLength){if(r>e.byteLength)throw new Error(`Invalid truncate option, must be less than or equal to ${e.byteLength}`);e=e.subarray(0,r)}return Kt(t,e)}function Ui(e){return async t=>new Uint8Array(await crypto.subtle.digest(e,t))}var Mn=Vn({name:"sha2-256",code:18,encode:Ui("SHA-256")}),qu=Vn({name:"sha2-512",code:19,encode:Ui("SHA-512")});var Fn={...Kn,...Ln,...kn,..._n,...Un,...vn,...Bn,...An,...Nn,...Dn},c0={...Pn,...In};function Di(e,t,r,n){return{name:e,prefix:t,encoder:{name:e,prefix:t,encode:r},decoder:{decode:n}}}var Li=Di("utf8","u",e=>"u"+new TextDecoder("utf8").decode(e),e=>new TextEncoder().encode(e.substring(1))),qn=Di("ascii","a",e=>{let t="a";for(let r=0;r<e.length;r++)t+=String.fromCharCode(e[r]);return t},e=>{e=e.substring(1);let t=wt(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}),Hu={utf8:Li,"utf-8":Li,hex:Fn.base16,latin1:qn,ascii:qn,binary:qn,...Fn},Kr=Hu;function Z(e,t="utf8"){let r=Kr[t];if(r==null)throw new Error(`Unsupported encoding "${t}"`);return r.decoder.decode(`${r.prefix}${e}`)}function Q(e,t="utf8"){let r=Kr[t];if(r==null)throw new Error(`Unsupported encoding "${t}"`);return r.encoder.encode(e).substring(1)}var $u=parseInt("11111",2),Hn=parseInt("10000000",2),zu=parseInt("01111111",2),Ri={0:or,1:or,2:Zu,3:ju,4:Xu,5:Yu,6:Gu,16:or,22:or,48:or};function qt(e,t={offset:0}){let r=e[t.offset]&$u;if(t.offset++,Ri[r]!=null)return Ri[r](e,t);throw new Error("No decoder for tag "+r)}function ir(e,t){let r=0;if((e[t.offset]&Hn)===Hn){let n=e[t.offset]&zu,o="0x";t.offset++;for(let i=0;i<n;i++,t.offset++)o+=e[t.offset].toString(16).padStart(2,"0");r=parseInt(o,16)}else r=e[t.offset],t.offset++;return r}function or(e,t){ir(e,t);let r=[];for(;!(t.offset>=e.byteLength);){let n=qt(e,t);if(n===null)break;r.push(n)}return r}function Zu(e,t){let r=ir(e,t),n=t.offset,o=t.offset+r,i=[];for(let s=n;s<o;s++)s===n&&e[s]===0||i.push(e[s]);return t.offset+=r,Uint8Array.from(i)}function Gu(e,t){let r=ir(e,t),n=t.offset+r,o=e[t.offset];t.offset++;let i=0,s=0;o<40?(i=0,s=o):o<80?(i=1,s=o-40):(i=2,s=o-80);let a=`${i}.${s}`,c=[];for(;t.offset<n;){let d=e[t.offset];if(t.offset++,c.push(d&127),d<128){c.reverse();let u=0;for(let f=0;f<c.length;f++)u+=c[f]<<f*7;a+=`.${u}`,c=[]}}return a}function Yu(e,t){return t.offset++,null}function ju(e,t){let r=ir(e,t),n=e[t.offset];t.offset++;let o=e.subarray(t.offset,t.offset+r-1);if(t.offset+=r,n!==0)throw new Error("Unused bits in bit string is unimplemented");return o}function Xu(e,t){let r=ir(e,t),n=e.subarray(t.offset,t.offset+r);return t.offset+=r,n}function Wu(e){let t=e.toString(16);t.length%2===1&&(t="0"+t);let r=new Et;for(let n=0;n<t.length;n+=2)r.append(Uint8Array.from([parseInt(`${t[n]}${t[n+1]}`,16)]));return r}function $n(e){if(e.byteLength<128)return Uint8Array.from([e.byteLength]);let t=Wu(e.byteLength);return new Et(Uint8Array.from([t.byteLength|Hn]),t)}function gt(e){let t=new Et,r=128;return(e.subarray()[0]&r)===r&&t.append(Uint8Array.from([0])),t.append(e),new Et(Uint8Array.from([2]),$n(t),t)}function Or(e){let t=Uint8Array.from([0]),r=new Et(t,e);return new Et(Uint8Array.from([3]),$n(r),r)}function ne(e,t=48){let r=new Et;for(let n of e)r.append(n);return new Et(Uint8Array.from([t]),$n(r),r)}async function Ni(e,t,r,n){let o=await crypto.subtle.importKey("jwk",e,{name:"ECDSA",namedCurve:e.crv??"P-256"},!1,["verify"]);n?.signal?.throwIfAborted();let i=await crypto.subtle.verify({name:"ECDSA",hash:{name:"SHA-256"}},o,t,r.subarray());return n?.signal?.throwIfAborted(),i}var Ju=Uint8Array.from([6,8,42,134,72,206,61,3,1,7]),Qu=Uint8Array.from([6,5,43,129,4,0,34]),tf=Uint8Array.from([6,5,43,129,4,0,35]),ef={ext:!0,kty:"EC",crv:"P-256"},rf={ext:!0,kty:"EC",crv:"P-384"},nf={ext:!0,kty:"EC",crv:"P-521"},zn=32,Zn=48,Gn=66;function ki(e){let t=qt(e);return Ki(t)}function Ki(e){let t=e[1][1][0],r=1,n,o;if(t.byteLength===zn*2+1)return n=Q(t.subarray(r,r+zn),"base64url"),o=Q(t.subarray(r+zn),"base64url"),new Re({...ef,key_ops:["verify"],x:n,y:o});if(t.byteLength===Zn*2+1)return n=Q(t.subarray(r,r+Zn),"base64url"),o=Q(t.subarray(r+Zn),"base64url"),new Re({...rf,key_ops:["verify"],x:n,y:o});if(t.byteLength===Gn*2+1)return n=Q(t.subarray(r,r+Gn),"base64url"),o=Q(t.subarray(r+Gn),"base64url"),new Re({...nf,key_ops:["verify"],x:n,y:o});throw new rt(`coordinates were wrong length, got ${t.byteLength}, expected 65, 97 or 133`)}function Oi(e){return ne([gt(Uint8Array.from([1])),ne([of(e.crv)],160),ne([Or(new Et(Uint8Array.from([4]),Z(e.x??"","base64url"),Z(e.y??"","base64url")))],161)]).subarray()}function of(e){if(e==="P-256")return Ju;if(e==="P-384")return Qu;if(e==="P-521")return tf;throw new rt(`Invalid curve ${e}`)}var Re=class{type="ECDSA";jwk;_raw;constructor(t){this.jwk=t}get raw(){return this._raw==null&&(this._raw=Oi(this.jwk)),this._raw}toMultihash(){return me.digest(oe(this))}toCID(){return ct.createV1(114,this.toMultihash())}toString(){return et.encode(this.toMultihash().bytes).substring(1)}equals(t){return t==null||!(t.raw instanceof Uint8Array)?!1:yt(this.raw,t.raw)}async verify(t,r,n){return Ni(this.jwk,r,t,n)}};function ye(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&e.constructor.name==="Uint8Array"}function Ot(e,t=""){if(!Number.isSafeInteger(e)||e<0){let r=t&&`"${t}" `;throw new Error(`${r}expected integer >= 0, got ${e}`)}}function H(e,t,r=""){let n=ye(e),o=e?.length,i=t!==void 0;if(!n||i&&o!==t){let s=r&&`"${r}" `,a=i?` of length ${t}`:"",c=n?`length=${o}`:`type=${typeof e}`;throw new Error(s+"expected Uint8Array"+a+", got "+c)}return e}function Vr(e){if(typeof e!="function"||typeof e.create!="function")throw new Error("Hash must wrapped by utils.createHasher");Ot(e.outputLen),Ot(e.blockLen)}function Ne(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function Mi(e,t){H(e,void 0,"digestInto() output");let r=t.outputLen;if(e.length<r)throw new Error('"digestInto() output" expected to be of length >='+r)}function $t(...e){for(let t=0;t<e.length;t++)e[t].fill(0)}function Mr(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)}function Lt(e,t){return e<<32-t|e>>>t}var Pi=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",sf=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function zt(e){if(H(e),Pi)return e.toHex();let t="";for(let r=0;r<e.length;r++)t+=sf[e[r]];return t}var Ht={_0:48,_9:57,A:65,F:70,a:97,f:102};function Vi(e){if(e>=Ht._0&&e<=Ht._9)return e-Ht._0;if(e>=Ht.A&&e<=Ht.F)return e-(Ht.A-10);if(e>=Ht.a&&e<=Ht.f)return e-(Ht.a-10)}function Zt(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);if(Pi)return Uint8Array.fromHex(e);let t=e.length,r=t/2;if(t%2)throw new Error("hex string expected, got unpadded hex of length "+t);let n=new Uint8Array(r);for(let o=0,i=0;o<r;o++,i+=2){let s=Vi(e.charCodeAt(i)),a=Vi(e.charCodeAt(i+1));if(s===void 0||a===void 0){let c=e[i]+e[i+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+i)}n[o]=s*16+a}return n}function xt(...e){let t=0;for(let n=0;n<e.length;n++){let o=e[n];H(o),t+=o.length}let r=new Uint8Array(t);for(let n=0,o=0;n<e.length;n++){let i=e[n];r.set(i,o),o+=i.length}return r}function Yn(e,t={}){let r=(o,i)=>e(i).update(o).digest(),n=e(void 0);return r.outputLen=n.outputLen,r.blockLen=n.blockLen,r.create=o=>e(o),Object.assign(r,t),Object.freeze(r)}function ke(e=32){let t=typeof globalThis=="object"?globalThis.crypto:null;if(typeof t?.getRandomValues!="function")throw new Error("crypto.getRandomValues must be defined");return t.getRandomValues(new Uint8Array(e))}var jn=e=>({oid:Uint8Array.from([6,9,96,134,72,1,101,3,4,2,e])});function Fi(e,t,r){return e&t^~e&r}function qi(e,t,r){return e&t^e&r^t&r}var sr=class{blockLen;outputLen;padOffset;isLE;buffer;view;finished=!1;length=0;pos=0;destroyed=!1;constructor(t,r,n,o){this.blockLen=t,this.outputLen=r,this.padOffset=n,this.isLE=o,this.buffer=new Uint8Array(t),this.view=Mr(this.buffer)}update(t){Ne(this),H(t);let{view:r,buffer:n,blockLen:o}=this,i=t.length;for(let s=0;s<i;){let a=Math.min(o-this.pos,i-s);if(a===o){let c=Mr(t);for(;o<=i-s;s+=o)this.process(c,s);continue}n.set(t.subarray(s,s+a),this.pos),this.pos+=a,s+=a,this.pos===o&&(this.process(r,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){Ne(this),Mi(t,this),this.finished=!0;let{buffer:r,view:n,blockLen:o,isLE:i}=this,{pos:s}=this;r[s++]=128,$t(this.buffer.subarray(s)),this.padOffset>o-s&&(this.process(n,0),s=0);for(let f=s;f<o;f++)r[f]=0;n.setBigUint64(o-8,BigInt(this.length*8),i),this.process(n,0);let a=Mr(t),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen must be aligned to 32bit");let d=c/4,u=this.get();if(d>u.length)throw new Error("_sha2: outputLen bigger than state");for(let f=0;f<d;f++)a.setUint32(4*f,u[f],i)}digest(){let{buffer:t,outputLen:r}=this;this.digestInto(t);let n=t.slice(0,r);return this.destroy(),n}_cloneInto(t){t||=new this.constructor,t.set(...this.get());let{blockLen:r,buffer:n,length:o,finished:i,destroyed:s,pos:a}=this;return t.destroyed=s,t.finished=i,t.length=o,t.pos=a,o%r&&t.buffer.set(n),t}clone(){return this._cloneInto()}},Gt=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]);var ut=Uint32Array.from([1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209]);var Pr=BigInt(4294967295),Hi=BigInt(32);function af(e,t=!1){return t?{h:Number(e&Pr),l:Number(e>>Hi&Pr)}:{h:Number(e>>Hi&Pr)|0,l:Number(e&Pr)|0}}function $i(e,t=!1){let r=e.length,n=new Uint32Array(r),o=new Uint32Array(r);for(let i=0;i<r;i++){let{h:s,l:a}=af(e[i],t);[n[i],o[i]]=[s,a]}return[n,o]}var Xn=(e,t,r)=>e>>>r,Wn=(e,t,r)=>e<<32-r|t>>>r,ge=(e,t,r)=>e>>>r|t<<32-r,xe=(e,t,r)=>e<<32-r|t>>>r,ar=(e,t,r)=>e<<64-r|t>>>r-32,cr=(e,t,r)=>e>>>r-32|t<<64-r;function Vt(e,t,r,n){let o=(t>>>0)+(n>>>0);return{h:e+r+(o/2**32|0)|0,l:o|0}}var zi=(e,t,r)=>(e>>>0)+(t>>>0)+(r>>>0),Zi=(e,t,r,n)=>t+r+n+(e/2**32|0)|0,Gi=(e,t,r,n)=>(e>>>0)+(t>>>0)+(r>>>0)+(n>>>0),Yi=(e,t,r,n,o)=>t+r+n+o+(e/2**32|0)|0,ji=(e,t,r,n,o)=>(e>>>0)+(t>>>0)+(r>>>0)+(n>>>0)+(o>>>0),Xi=(e,t,r,n,o,i)=>t+r+n+o+i+(e/2**32|0)|0;var uf=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),ie=new Uint32Array(64),Jn=class extends sr{constructor(t){super(64,t,8,!1)}get(){let{A:t,B:r,C:n,D:o,E:i,F:s,G:a,H:c}=this;return[t,r,n,o,i,s,a,c]}set(t,r,n,o,i,s,a,c){this.A=t|0,this.B=r|0,this.C=n|0,this.D=o|0,this.E=i|0,this.F=s|0,this.G=a|0,this.H=c|0}process(t,r){for(let f=0;f<16;f++,r+=4)ie[f]=t.getUint32(r,!1);for(let f=16;f<64;f++){let w=ie[f-15],C=ie[f-2],x=Lt(w,7)^Lt(w,18)^w>>>3,v=Lt(C,17)^Lt(C,19)^C>>>10;ie[f]=v+ie[f-7]+x+ie[f-16]|0}let{A:n,B:o,C:i,D:s,E:a,F:c,G:d,H:u}=this;for(let f=0;f<64;f++){let w=Lt(a,6)^Lt(a,11)^Lt(a,25),C=u+w+Fi(a,c,d)+uf[f]+ie[f]|0,v=(Lt(n,2)^Lt(n,13)^Lt(n,22))+qi(n,o,i)|0;u=d,d=c,c=a,a=s+C|0,s=i,i=o,o=n,n=C+v|0}n=n+this.A|0,o=o+this.B|0,i=i+this.C|0,s=s+this.D|0,a=a+this.E|0,c=c+this.F|0,d=d+this.G|0,u=u+this.H|0,this.set(n,o,i,s,a,c,d,u)}roundClean(){$t(ie)}destroy(){this.set(0,0,0,0,0,0,0,0),$t(this.buffer)}},Qn=class extends Jn{A=Gt[0]|0;B=Gt[1]|0;C=Gt[2]|0;D=Gt[3]|0;E=Gt[4]|0;F=Gt[5]|0;G=Gt[6]|0;H=Gt[7]|0;constructor(){super(32)}};var Wi=$i(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(e=>BigInt(e))),ff=Wi[0],lf=Wi[1],se=new Uint32Array(80),ae=new Uint32Array(80),to=class extends sr{constructor(t){super(128,t,16,!1)}get(){let{Ah:t,Al:r,Bh:n,Bl:o,Ch:i,Cl:s,Dh:a,Dl:c,Eh:d,El:u,Fh:f,Fl:w,Gh:C,Gl:x,Hh:v,Hl:B}=this;return[t,r,n,o,i,s,a,c,d,u,f,w,C,x,v,B]}set(t,r,n,o,i,s,a,c,d,u,f,w,C,x,v,B){this.Ah=t|0,this.Al=r|0,this.Bh=n|0,this.Bl=o|0,this.Ch=i|0,this.Cl=s|0,this.Dh=a|0,this.Dl=c|0,this.Eh=d|0,this.El=u|0,this.Fh=f|0,this.Fl=w|0,this.Gh=C|0,this.Gl=x|0,this.Hh=v|0,this.Hl=B|0}process(t,r){for(let S=0;S<16;S++,r+=4)se[S]=t.getUint32(r),ae[S]=t.getUint32(r+=4);for(let S=16;S<80;S++){let D=se[S-15]|0,O=ae[S-15]|0,M=ge(D,O,1)^ge(D,O,8)^Xn(D,O,7),F=xe(D,O,1)^xe(D,O,8)^Wn(D,O,7),h=se[S-2]|0,p=ae[S-2]|0,_=ge(h,p,19)^ar(h,p,61)^Xn(h,p,6),U=xe(h,p,19)^cr(h,p,61)^Wn(h,p,6),A=Gi(F,U,ae[S-7],ae[S-16]),m=Yi(A,M,_,se[S-7],se[S-16]);se[S]=m|0,ae[S]=A|0}let{Ah:n,Al:o,Bh:i,Bl:s,Ch:a,Cl:c,Dh:d,Dl:u,Eh:f,El:w,Fh:C,Fl:x,Gh:v,Gl:B,Hh:b,Hl:I}=this;for(let S=0;S<80;S++){let D=ge(f,w,14)^ge(f,w,18)^ar(f,w,41),O=xe(f,w,14)^xe(f,w,18)^cr(f,w,41),M=f&C^~f&v,F=w&x^~w&B,h=ji(I,O,F,lf[S],ae[S]),p=Xi(h,b,D,M,ff[S],se[S]),_=h|0,U=ge(n,o,28)^ar(n,o,34)^ar(n,o,39),A=xe(n,o,28)^cr(n,o,34)^cr(n,o,39),m=n&i^n&a^i&a,y=o&s^o&c^s&c;b=v|0,I=B|0,v=C|0,B=x|0,C=f|0,x=w|0,{h:f,l:w}=Vt(d|0,u|0,p|0,_|0),d=a|0,u=c|0,a=i|0,c=s|0,i=n|0,s=o|0;let l=zi(_,A,y);n=Zi(l,p,U,m),o=l|0}({h:n,l:o}=Vt(this.Ah|0,this.Al|0,n|0,o|0)),{h:i,l:s}=Vt(this.Bh|0,this.Bl|0,i|0,s|0),{h:a,l:c}=Vt(this.Ch|0,this.Cl|0,a|0,c|0),{h:d,l:u}=Vt(this.Dh|0,this.Dl|0,d|0,u|0),{h:f,l:w}=Vt(this.Eh|0,this.El|0,f|0,w|0),{h:C,l:x}=Vt(this.Fh|0,this.Fl|0,C|0,x|0),{h:v,l:B}=Vt(this.Gh|0,this.Gl|0,v|0,B|0),{h:b,l:I}=Vt(this.Hh|0,this.Hl|0,b|0,I|0),this.set(n,o,i,s,a,c,d,u,f,w,C,x,v,B,b,I)}roundClean(){$t(se,ae)}destroy(){$t(this.buffer),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}},eo=class extends to{Ah=ut[0]|0;Al=ut[1]|0;Bh=ut[2]|0;Bl=ut[3]|0;Ch=ut[4]|0;Cl=ut[5]|0;Dh=ut[6]|0;Dl=ut[7]|0;Eh=ut[8]|0;El=ut[9]|0;Fh=ut[10]|0;Fl=ut[11]|0;Gh=ut[12]|0;Gl=ut[13]|0;Hh=ut[14]|0;Hl=ut[15]|0;constructor(){super(64)}};var Ke=Yn(()=>new Qn,jn(1));var Ji=Yn(()=>new eo,jn(3));var no=BigInt(0),ro=BigInt(1);function Yt(e,t=""){if(typeof e!="boolean"){let r=t&&`"${t}" `;throw new Error(r+"expected boolean, got type="+typeof e)}return e}function Qi(e){if(typeof e=="bigint"){if(!Fr(e))throw new Error("positive bigint expected, got "+e)}else Ot(e);return e}function ur(e){let t=Qi(e).toString(16);return t.length&1?"0"+t:t}function ts(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);return e===""?no:BigInt("0x"+e)}function Oe(e){return ts(zt(e))}function be(e){return ts(zt(Hr(H(e)).reverse()))}function qr(e,t){Ot(t),e=Qi(e);let r=Zt(e.toString(16).padStart(t*2,"0"));if(r.length!==t)throw new Error("number too large");return r}function oo(e,t){return qr(e,t).reverse()}function Hr(e){return Uint8Array.from(e)}var Fr=e=>typeof e=="bigint"&&no<=e;function df(e,t,r){return Fr(e)&&Fr(t)&&Fr(r)&&t<=e&&e<r}function fr(e,t,r,n){if(!df(t,r,n))throw new Error("expected valid "+e+": "+r+" <= n < "+n+", got "+t)}function io(e){let t;for(t=0;e>no;e>>=ro,t+=1);return t}var lr=e=>(ro<<BigInt(e))-ro;function es(e,t,r){if(Ot(e,"hashLen"),Ot(t,"qByteLen"),typeof r!="function")throw new Error("hmacFn must be a function");let n=B=>new Uint8Array(B),o=Uint8Array.of(),i=Uint8Array.of(0),s=Uint8Array.of(1),a=1e3,c=n(e),d=n(e),u=0,f=()=>{c.fill(1),d.fill(0),u=0},w=(...B)=>r(d,xt(c,...B)),C=(B=o)=>{d=w(i,B),c=w(),B.length!==0&&(d=w(s,B),c=w())},x=()=>{if(u++>=a)throw new Error("drbg: tried max amount of iterations");let B=0,b=[];for(;B<t;){c=w();let I=c.slice();b.push(I),B+=c.length}return xt(...b)};return(B,b)=>{f(),C(B);let I;for(;!(I=b(x()));)C();return f(),I}}function ce(e,t={},r={}){if(!e||typeof e!="object")throw new Error("expected valid options object");function n(i,s,a){let c=e[i];if(a&&c===void 0)return;let d=typeof c;if(d!==s||c===null)throw new Error(`param "${i}" is invalid: expected ${s}, got ${d}`)}let o=(i,s)=>Object.entries(i).forEach(([a,c])=>n(a,c,s));o(t,!1),o(r,!0)}function Ve(e){let t=new WeakMap;return(r,...n)=>{let o=t.get(r);if(o!==void 0)return o;let i=e(r,...n);return t.set(r,i),i}}var ht=BigInt(0),nt=BigInt(1),we=BigInt(2),os=BigInt(3),is=BigInt(4),ss=BigInt(5),hf=BigInt(7),as=BigInt(8),pf=BigInt(9),cs=BigInt(16);function tt(e,t){let r=e%t;return r>=ht?r:t+r}function Y(e,t,r){let n=e;for(;t-- >ht;)n*=n,n%=r;return n}function rs(e,t){if(e===ht)throw new Error("invert: expected non-zero number");if(t<=ht)throw new Error("invert: expected positive modulus, got "+t);let r=tt(e,t),n=t,o=ht,i=nt,s=nt,a=ht;for(;r!==ht;){let d=n/r,u=n%r,f=o-s*d,w=i-a*d;n=r,r=u,o=s,i=a,s=f,a=w}if(n!==nt)throw new Error("invert: does not exist");return tt(o,t)}function ao(e,t,r){if(!e.eql(e.sqr(t),r))throw new Error("Cannot find square root")}function us(e,t){let r=(e.ORDER+nt)/is,n=e.pow(t,r);return ao(e,n,t),n}function mf(e,t){let r=(e.ORDER-ss)/as,n=e.mul(t,we),o=e.pow(n,r),i=e.mul(t,o),s=e.mul(e.mul(i,we),o),a=e.mul(i,e.sub(s,e.ONE));return ao(e,a,t),a}function yf(e){let t=Me(e),r=fs(e),n=r(t,t.neg(t.ONE)),o=r(t,n),i=r(t,t.neg(n)),s=(e+hf)/cs;return(a,c)=>{let d=a.pow(c,s),u=a.mul(d,n),f=a.mul(d,o),w=a.mul(d,i),C=a.eql(a.sqr(u),c),x=a.eql(a.sqr(f),c);d=a.cmov(d,u,C),u=a.cmov(w,f,x);let v=a.eql(a.sqr(u),c),B=a.cmov(d,u,v);return ao(a,B,c),B}}function fs(e){if(e<os)throw new Error("sqrt is not defined for small field");let t=e-nt,r=0;for(;t%we===ht;)t/=we,r++;let n=we,o=Me(e);for(;ns(o,n)===1;)if(n++>1e3)throw new Error("Cannot find square root: probably non-prime P");if(r===1)return us;let i=o.pow(n,t),s=(t+nt)/we;return function(c,d){if(c.is0(d))return d;if(ns(c,d)!==1)throw new Error("Cannot find square root");let u=r,f=c.mul(c.ONE,i),w=c.pow(d,t),C=c.pow(d,s);for(;!c.eql(w,c.ONE);){if(c.is0(w))return c.ZERO;let x=1,v=c.sqr(w);for(;!c.eql(v,c.ONE);)if(x++,v=c.sqr(v),x===u)throw new Error("Cannot find square root");let B=nt<<BigInt(u-x-1),b=c.pow(f,B);u=x,f=c.sqr(b),w=c.mul(w,f),C=c.mul(C,b)}return C}}function gf(e){return e%is===os?us:e%as===ss?mf:e%cs===pf?yf(e):fs(e)}var ls=(e,t)=>(tt(e,t)&nt)===nt,xf=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function co(e){let t={ORDER:"bigint",BYTES:"number",BITS:"number"},r=xf.reduce((n,o)=>(n[o]="function",n),t);return ce(e,r),e}function bf(e,t,r){if(r<ht)throw new Error("invalid exponent, negatives unsupported");if(r===ht)return e.ONE;if(r===nt)return t;let n=e.ONE,o=t;for(;r>ht;)r&nt&&(n=e.mul(n,o)),o=e.sqr(o),r>>=nt;return n}function dr(e,t,r=!1){let n=new Array(t.length).fill(r?e.ZERO:void 0),o=t.reduce((s,a,c)=>e.is0(a)?s:(n[c]=s,e.mul(s,a)),e.ONE),i=e.inv(o);return t.reduceRight((s,a,c)=>e.is0(a)?s:(n[c]=e.mul(s,n[c]),e.mul(s,a)),i),n}function ns(e,t){let r=(e.ORDER-nt)/we,n=e.pow(t,r),o=e.eql(n,e.ONE),i=e.eql(n,e.ZERO),s=e.eql(n,e.neg(e.ONE));if(!o&&!i&&!s)throw new Error("invalid Legendre symbol result");return o?1:i?0:-1}function wf(e,t){t!==void 0&&Ot(t);let r=t!==void 0?t:e.toString(2).length,n=Math.ceil(r/8);return{nBitLength:r,nByteLength:n}}var so=class{ORDER;BITS;BYTES;isLE;ZERO=ht;ONE=nt;_lengths;_sqrt;_mod;constructor(t,r={}){if(t<=ht)throw new Error("invalid field: expected ORDER > 0, got "+t);let n;this.isLE=!1,r!=null&&typeof r=="object"&&(typeof r.BITS=="number"&&(n=r.BITS),typeof r.sqrt=="function"&&(this.sqrt=r.sqrt),typeof r.isLE=="boolean"&&(this.isLE=r.isLE),r.allowedLengths&&(this._lengths=r.allowedLengths?.slice()),typeof r.modFromBytes=="boolean"&&(this._mod=r.modFromBytes));let{nBitLength:o,nByteLength:i}=wf(t,n);if(i>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");this.ORDER=t,this.BITS=o,this.BYTES=i,this._sqrt=void 0,Object.preventExtensions(this)}create(t){return tt(t,this.ORDER)}isValid(t){if(typeof t!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof t);return ht<=t&&t<this.ORDER}is0(t){return t===ht}isValidNot0(t){return!this.is0(t)&&this.isValid(t)}isOdd(t){return(t&nt)===nt}neg(t){return tt(-t,this.ORDER)}eql(t,r){return t===r}sqr(t){return tt(t*t,this.ORDER)}add(t,r){return tt(t+r,this.ORDER)}sub(t,r){return tt(t-r,this.ORDER)}mul(t,r){return tt(t*r,this.ORDER)}pow(t,r){return bf(this,t,r)}div(t,r){return tt(t*rs(r,this.ORDER),this.ORDER)}sqrN(t){return t*t}addN(t,r){return t+r}subN(t,r){return t-r}mulN(t,r){return t*r}inv(t){return rs(t,this.ORDER)}sqrt(t){return this._sqrt||(this._sqrt=gf(this.ORDER)),this._sqrt(this,t)}toBytes(t){return this.isLE?oo(t,this.BYTES):qr(t,this.BYTES)}fromBytes(t,r=!1){H(t);let{_lengths:n,BYTES:o,isLE:i,ORDER:s,_mod:a}=this;if(n){if(!n.includes(t.length)||t.length>o)throw new Error("Field.fromBytes: expected "+n+" bytes, got "+t.length);let d=new Uint8Array(o);d.set(t,i?0:d.length-t.length),t=d}if(t.length!==o)throw new Error("Field.fromBytes: expected "+o+" bytes, got "+t.length);let c=i?be(t):Oe(t);if(a&&(c=tt(c,s)),!r&&!this.isValid(c))throw new Error("invalid field element: outside of range 0..ORDER");return c}invertBatch(t){return dr(this,t)}cmov(t,r,n){return n?r:t}};function Me(e,t={}){return new so(e,t)}function ds(e){if(typeof e!="bigint")throw new Error("field order must be bigint");let t=e.toString(2).length;return Math.ceil(t/8)}function uo(e){let t=ds(e);return t+Math.ceil(t/2)}function fo(e,t,r=!1){H(e);let n=e.length,o=ds(t),i=uo(t);if(n<16||n<i||n>1024)throw new Error("expected "+i+"-1024 bytes of input, got "+n);let s=r?be(e):Oe(e),a=tt(s,t-nt)+nt;return r?oo(a,o):qr(a,o)}var Pe=BigInt(0),Ee=BigInt(1);function hr(e,t){let r=t.negate();return e?r:t}function Se(e,t){let r=dr(e.Fp,t.map(n=>n.Z));return t.map((n,o)=>e.fromAffine(n.toAffine(r[o])))}function ys(e,t){if(!Number.isSafeInteger(e)||e<=0||e>t)throw new Error("invalid window size, expected [1.."+t+"], got W="+e)}function lo(e,t){ys(e,t);let r=Math.ceil(t/e)+1,n=2**(e-1),o=2**e,i=lr(e),s=BigInt(e);return{windows:r,windowSize:n,mask:i,maxNumber:o,shiftBy:s}}function hs(e,t,r){let{windowSize:n,mask:o,maxNumber:i,shiftBy:s}=r,a=Number(e&o),c=e>>s;a>n&&(a-=i,c+=Ee);let d=t*n,u=d+Math.abs(a)-1,f=a===0,w=a<0,C=t%2!==0;return{nextN:c,offset:u,isZero:f,isNeg:w,isNegF:C,offsetF:d}}var ho=new WeakMap,gs=new WeakMap;function po(e){return gs.get(e)||1}function ps(e){if(e!==Pe)throw new Error("invalid wNAF")}var Fe=class{BASE;ZERO;Fn;bits;constructor(t,r){this.BASE=t.BASE,this.ZERO=t.ZERO,this.Fn=t.Fn,this.bits=r}_unsafeLadder(t,r,n=this.ZERO){let o=t;for(;r>Pe;)r&Ee&&(n=n.add(o)),o=o.double(),r>>=Ee;return n}precomputeWindow(t,r){let{windows:n,windowSize:o}=lo(r,this.bits),i=[],s=t,a=s;for(let c=0;c<n;c++){a=s,i.push(a);for(let d=1;d<o;d++)a=a.add(s),i.push(a);s=a.double()}return i}wNAF(t,r,n){if(!this.Fn.isValid(n))throw new Error("invalid scalar");let o=this.ZERO,i=this.BASE,s=lo(t,this.bits);for(let a=0;a<s.windows;a++){let{nextN:c,offset:d,isZero:u,isNeg:f,isNegF:w,offsetF:C}=hs(n,a,s);n=c,u?i=i.add(hr(w,r[C])):o=o.add(hr(f,r[d]))}return ps(n),{p:o,f:i}}wNAFUnsafe(t,r,n,o=this.ZERO){let i=lo(t,this.bits);for(let s=0;s<i.windows&&n!==Pe;s++){let{nextN:a,offset:c,isZero:d,isNeg:u}=hs(n,s,i);if(n=a,!d){let f=r[c];o=o.add(u?f.negate():f)}}return ps(n),o}getPrecomputes(t,r,n){let o=ho.get(r);return o||(o=this.precomputeWindow(r,t),t!==1&&(typeof n=="function"&&(o=n(o)),ho.set(r,o))),o}cached(t,r,n){let o=po(t);return this.wNAF(o,this.getPrecomputes(o,t,n),r)}unsafe(t,r,n,o){let i=po(t);return i===1?this._unsafeLadder(t,r,o):this.wNAFUnsafe(i,this.getPrecomputes(i,t,n),r,o)}createCache(t,r){ys(r,this.bits),gs.set(t,r),ho.delete(t)}hasCache(t){return po(t)!==1}};function xs(e,t,r,n){let o=t,i=e.ZERO,s=e.ZERO;for(;r>Pe||n>Pe;)r&Ee&&(i=i.add(o)),n&Ee&&(s=s.add(o)),o=o.double(),r>>=Ee,n>>=Ee;return{p1:i,p2:s}}function ms(e,t,r){if(t){if(t.ORDER!==e)throw new Error("Field.ORDER must match order: Fp == p, Fn == n");return co(t),t}else return Me(e,{isLE:r})}function $r(e,t,r={},n){if(n===void 0&&(n=e==="edwards"),!t||typeof t!="object")throw new Error(`expected valid ${e} CURVE object`);for(let c of["p","n","h"]){let d=t[c];if(!(typeof d=="bigint"&&d>Pe))throw new Error(`CURVE.${c} must be positive bigint`)}let o=ms(t.p,r.Fp,n),i=ms(t.n,r.Fn,n),a=["Gx","Gy","a",e==="weierstrass"?"b":"d"];for(let c of a)if(!o.isValid(t[c]))throw new Error(`CURVE.${c} must be valid field element of CURVE.Fp`);return t=Object.freeze(Object.assign({},t)),{CURVE:t,Fp:o,Fn:i}}function zr(e,t){return function(n){let o=e(n);return{secretKey:o,publicKey:t(o)}}}var ue=BigInt(0),ot=BigInt(1),mo=BigInt(2),Ef=BigInt(8);function Sf(e,t,r,n){let o=e.sqr(r),i=e.sqr(n),s=e.add(e.mul(t.a,o),i),a=e.add(e.ONE,e.mul(t.d,e.mul(o,i)));return e.eql(s,a)}function bs(e,t={}){let r=$r("edwards",e,t,t.FpFnLE),{Fp:n,Fn:o}=r,i=r.CURVE,{h:s}=i;ce(t,{},{uvRatio:"function"});let a=mo<<BigInt(o.BYTES*8)-ot,c=B=>n.create(B),d=t.uvRatio||((B,b)=>{try{return{isValid:!0,value:n.sqrt(n.div(B,b))}}catch{return{isValid:!1,value:ue}}});if(!Sf(n,i,i.Gx,i.Gy))throw new Error("bad curve params: generator point");function u(B,b,I=!1){let S=I?ot:ue;return fr("coordinate "+B,b,S,a),b}function f(B){if(!(B instanceof x))throw new Error("EdwardsPoint expected")}let w=Ve((B,b)=>{let{X:I,Y:S,Z:D}=B,O=B.is0();b==null&&(b=O?Ef:n.inv(D));let M=c(I*b),F=c(S*b),h=n.mul(D,b);if(O)return{x:ue,y:ot};if(h!==ot)throw new Error("invZ was invalid");return{x:M,y:F}}),C=Ve(B=>{let{a:b,d:I}=i;if(B.is0())throw new Error("bad point: ZERO");let{X:S,Y:D,Z:O,T:M}=B,F=c(S*S),h=c(D*D),p=c(O*O),_=c(p*p),U=c(F*b),A=c(p*c(U+h)),m=c(_+c(I*c(F*h)));if(A!==m)throw new Error("bad point: equation left != right (1)");let y=c(S*D),l=c(O*M);if(y!==l)throw new Error("bad point: equation left != right (2)");return!0});class x{static BASE=new x(i.Gx,i.Gy,ot,c(i.Gx*i.Gy));static ZERO=new x(ue,ot,ot,ue);static Fp=n;static Fn=o;X;Y;Z;T;constructor(b,I,S,D){this.X=u("x",b),this.Y=u("y",I),this.Z=u("z",S,!0),this.T=u("t",D),Object.freeze(this)}static CURVE(){return i}static fromAffine(b){if(b instanceof x)throw new Error("extended point not allowed");let{x:I,y:S}=b||{};return u("x",I),u("y",S),new x(I,S,ot,c(I*S))}static fromBytes(b,I=!1){let S=n.BYTES,{a:D,d:O}=i;b=Hr(H(b,S,"point")),Yt(I,"zip215");let M=Hr(b),F=b[S-1];M[S-1]=F&-129;let h=be(M),p=I?a:n.ORDER;fr("point.y",h,ue,p);let _=c(h*h),U=c(_-ot),A=c(O*_-D),{isValid:m,value:y}=d(U,A);if(!m)throw new Error("bad point: invalid y coordinate");let l=(y&ot)===ot,E=(F&128)!==0;if(!I&&y===ue&&E)throw new Error("bad point: x=0 and x_0=1");return E!==l&&(y=c(-y)),x.fromAffine({x:y,y:h})}static fromHex(b,I=!1){return x.fromBytes(Zt(b),I)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}precompute(b=8,I=!0){return v.createCache(this,b),I||this.multiply(mo),this}assertValidity(){C(this)}equals(b){f(b);let{X:I,Y:S,Z:D}=this,{X:O,Y:M,Z:F}=b,h=c(I*F),p=c(O*D),_=c(S*F),U=c(M*D);return h===p&&_===U}is0(){return this.equals(x.ZERO)}negate(){return new x(c(-this.X),this.Y,this.Z,c(-this.T))}double(){let{a:b}=i,{X:I,Y:S,Z:D}=this,O=c(I*I),M=c(S*S),F=c(mo*c(D*D)),h=c(b*O),p=I+S,_=c(c(p*p)-O-M),U=h+M,A=U-F,m=h-M,y=c(_*A),l=c(U*m),E=c(_*m),L=c(A*U);return new x(y,l,L,E)}add(b){f(b);let{a:I,d:S}=i,{X:D,Y:O,Z:M,T:F}=this,{X:h,Y:p,Z:_,T:U}=b,A=c(D*h),m=c(O*p),y=c(F*S*U),l=c(M*_),E=c((D+O)*(h+p)-A-m),L=l-y,R=l+y,k=c(m-I*A),K=c(E*L),V=c(R*k),q=c(E*k),j=c(L*R);return new x(K,V,j,q)}subtract(b){return this.add(b.negate())}multiply(b){if(!o.isValidNot0(b))throw new Error("invalid scalar: expected 1 <= sc < curve.n");let{p:I,f:S}=v.cached(this,b,D=>Se(x,D));return Se(x,[I,S])[0]}multiplyUnsafe(b,I=x.ZERO){if(!o.isValid(b))throw new Error("invalid scalar: expected 0 <= sc < curve.n");return b===ue?x.ZERO:this.is0()||b===ot?this:v.unsafe(this,b,S=>Se(x,S),I)}isSmallOrder(){return this.multiplyUnsafe(s).is0()}isTorsionFree(){return v.unsafe(this,i.n).is0()}toAffine(b){return w(this,b)}clearCofactor(){return s===ot?this:this.multiplyUnsafe(s)}toBytes(){let{x:b,y:I}=this.toAffine(),S=n.toBytes(I);return S[S.length-1]|=b&ot?128:0,S}toHex(){return zt(this.toBytes())}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}}let v=new Fe(x,o.BITS);return x.BASE.precompute(8),x}function ws(e,t,r={}){if(typeof t!="function")throw new Error('"hash" function param is required');ce(r,{},{adjustScalarBytes:"function",randomBytes:"function",domain:"function",prehash:"function",mapToCurve:"function"});let{prehash:n}=r,{BASE:o,Fp:i,Fn:s}=e,a=r.randomBytes||ke,c=r.adjustScalarBytes||(h=>h),d=r.domain||((h,p,_)=>{if(Yt(_,"phflag"),p.length||_)throw new Error("Contexts/pre-hash are not supported");return h});function u(h){return s.create(be(h))}function f(h){let p=S.secretKey;H(h,S.secretKey,"secretKey");let _=H(t(h),2*p,"hashedSecretKey"),U=c(_.slice(0,p)),A=_.slice(p,2*p),m=u(U);return{head:U,prefix:A,scalar:m}}function w(h){let{head:p,prefix:_,scalar:U}=f(h),A=o.multiply(U),m=A.toBytes();return{head:p,prefix:_,scalar:U,point:A,pointBytes:m}}function C(h){return w(h).pointBytes}function x(h=Uint8Array.of(),...p){let _=xt(...p);return u(t(d(_,H(h,void 0,"context"),!!n)))}function v(h,p,_={}){h=H(h,void 0,"message"),n&&(h=n(h));let{prefix:U,scalar:A,pointBytes:m}=w(p),y=x(_.context,U,h),l=o.multiply(y).toBytes(),E=x(_.context,l,m,h),L=s.create(y+E*A);if(!s.isValid(L))throw new Error("sign failed: invalid s");let R=xt(l,s.toBytes(L));return H(R,S.signature,"result")}let B={zip215:!0};function b(h,p,_,U=B){let{context:A,zip215:m}=U,y=S.signature;h=H(h,y,"signature"),p=H(p,void 0,"message"),_=H(_,S.publicKey,"publicKey"),m!==void 0&&Yt(m,"zip215"),n&&(p=n(p));let l=y/2,E=h.subarray(0,l),L=be(h.subarray(l,y)),R,k,K;try{R=e.fromBytes(_,m),k=e.fromBytes(E,m),K=o.multiplyUnsafe(L)}catch{return!1}if(!m&&R.isSmallOrder())return!1;let V=x(A,k.toBytes(),R.toBytes(),p);return k.add(R.multiplyUnsafe(V)).subtract(K).clearCofactor().is0()}let I=i.BYTES,S={secretKey:I,publicKey:I,signature:2*I,seed:I};function D(h=a(S.seed)){return H(h,S.seed,"seed")}function O(h){return ye(h)&&h.length===s.BYTES}function M(h,p){try{return!!e.fromBytes(h,p)}catch{return!1}}let F={getExtendedPublicKey:w,randomSecretKey:D,isValidSecretKey:O,isValidPublicKey:M,toMontgomery(h){let{y:p}=e.fromBytes(h),_=S.publicKey,U=_===32;if(!U&&_!==57)throw new Error("only defined for 25519 and 448");let A=U?i.div(ot+p,ot-p):i.div(p-ot,p+ot);return i.toBytes(A)},toMontgomerySecret(h){let p=S.secretKey;H(h,p);let _=t(h.subarray(0,p));return c(_).subarray(0,p)}};return Object.freeze({keygen:zr(D,C),getPublicKey:C,sign:v,verify:b,utils:F,Point:e,lengths:S})}var Af=BigInt(1),Es=BigInt(2);var vf=BigInt(5),Bf=BigInt(8),yo=BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffed"),Cf={p:yo,n:BigInt("0x1000000000000000000000000000000014def9dea2f79cd65812631a5cf5d3ed"),h:Bf,a:BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffec"),d:BigInt("0x52036cee2b6ffe738cc740797779e89800700a4d4141d8ab75eb4dca135978a3"),Gx:BigInt("0x216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a"),Gy:BigInt("0x6666666666666666666666666666666666666666666666666666666666666658")};function Tf(e){let t=BigInt(10),r=BigInt(20),n=BigInt(40),o=BigInt(80),i=yo,a=e*e%i*e%i,c=Y(a,Es,i)*a%i,d=Y(c,Af,i)*e%i,u=Y(d,vf,i)*d%i,f=Y(u,t,i)*u%i,w=Y(f,r,i)*f%i,C=Y(w,n,i)*w%i,x=Y(C,o,i)*C%i,v=Y(x,o,i)*C%i,B=Y(v,t,i)*u%i;return{pow_p_5_8:Y(B,Es,i)*e%i,b2:a}}function If(e){return e[0]&=248,e[31]&=127,e[31]|=64,e}var Ss=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");function _f(e,t){let r=yo,n=tt(t*t*t,r),o=tt(n*n*t,r),i=Tf(e*o).pow_p_5_8,s=tt(e*n*i,r),a=tt(t*s*s,r),c=s,d=tt(s*Ss,r),u=a===e,f=a===tt(-e,r),w=a===tt(-e*Ss,r);return u&&(s=c),(f||w)&&(s=d),ls(s,r)&&(s=tt(-s,r)),{isValid:u||f,value:s}}var Uf=bs(Cf,{uvRatio:_f});function Lf(e){return ws(Uf,Ji,Object.assign({adjustScalarBytes:If},e))}var As=Lf({});var pr=class extends Error{constructor(t="An error occurred while verifying a message"){super(t),this.name="VerificationError"}},Zr=class extends Error{constructor(t="Missing Web Crypto API"){super(t),this.name="WebCryptoMissingError"}};var vs={get(e=globalThis){let t=e.crypto;if(t?.subtle==null)throw new Zr("Missing Web Crypto API. The most likely cause of this error is that this page is being accessed from an insecure context (i.e. not HTTPS). For more information and possible resolutions see https://github.com/libp2p/js-libp2p/blob/main/packages/crypto/README.md#web-crypto-api");return t}};var It=vs;var Gr=32;var go,Df=(async()=>{try{return await It.get().subtle.generateKey({name:"Ed25519"},!0,["sign","verify"]),!0}catch{return!1}})();async function Rf(e,t,r){if(e.buffer instanceof ArrayBuffer){let n=await It.get().subtle.importKey("raw",e.buffer,{name:"Ed25519"},!1,["verify"]);return await It.get().subtle.verify({name:"Ed25519"},n,t,r instanceof Uint8Array?r:r.subarray())}throw new TypeError("WebCrypto does not support SharedArrayBuffer for Ed25519 keys")}function Nf(e,t,r){return As.verify(t,r instanceof Uint8Array?r:r.subarray(),e)}async function Bs(e,t,r){return go==null&&(go=await Df),go?Rf(e,t,r):Nf(e,t,r)}function Yr(e){return e==null?!1:typeof e.then=="function"&&typeof e.catch=="function"&&typeof e.finally=="function"}var jr=class{type="Ed25519";raw;constructor(t){this.raw=xo(t,Gr)}toMultihash(){return me.digest(oe(this))}toCID(){return ct.createV1(114,this.toMultihash())}toString(){return et.encode(this.toMultihash().bytes).substring(1)}equals(t){return t==null||!(t.raw instanceof Uint8Array)?!1:yt(this.raw,t.raw)}verify(t,r,n){n?.signal?.throwIfAborted();let o=Bs(this.raw,r,t);return Yr(o)?o.then(i=>(n?.signal?.throwIfAborted(),i)):o}};function Ts(e){return e=xo(e,Gr),new jr(e)}function xo(e,t){if(e=Uint8Array.from(e??[]),e.length!==t)throw new rt(`Key must be a Uint8Array of length ${t}, got ${e.length}`);return e}var Kf=Math.pow(2,7),Of=Math.pow(2,14),Vf=Math.pow(2,21),Is=Math.pow(2,28),_s=Math.pow(2,35),Us=Math.pow(2,42),Ls=Math.pow(2,49),pt=128,fe=127;function mr(e){if(e<Kf)return 1;if(e<Of)return 2;if(e<Vf)return 3;if(e<Is)return 4;if(e<_s)return 5;if(e<Us)return 6;if(e<Ls)return 7;if(Number.MAX_SAFE_INTEGER!=null&&e>Number.MAX_SAFE_INTEGER)throw new RangeError("Could not encode varint");return 8}function Ds(e,t,r=0){switch(mr(e)){case 8:t[r++]=e&255|pt,e/=128;case 7:t[r++]=e&255|pt,e/=128;case 6:t[r++]=e&255|pt,e/=128;case 5:t[r++]=e&255|pt,e/=128;case 4:t[r++]=e&255|pt,e>>>=7;case 3:t[r++]=e&255|pt,e>>>=7;case 2:t[r++]=e&255|pt,e>>>=7;case 1:{t[r++]=e&255,e>>>=7;break}default:throw new Error("unreachable")}return t}function Rs(e,t){let r=e[t],n=0;if(n+=r&fe,r<pt||(r=e[t+1],n+=(r&fe)<<7,r<pt)||(r=e[t+2],n+=(r&fe)<<14,r<pt)||(r=e[t+3],n+=(r&fe)<<21,r<pt)||(r=e[t+4],n+=(r&fe)*Is,r<pt)||(r=e[t+5],n+=(r&fe)*_s,r<pt)||(r=e[t+6],n+=(r&fe)*Us,r<pt)||(r=e[t+7],n+=(r&fe)*Ls,r<pt))return n;throw new RangeError("Could not decode varint")}var bo=new Float32Array([-0]),le=new Uint8Array(bo.buffer);function Ns(e,t,r){bo[0]=e,t[r]=le[0],t[r+1]=le[1],t[r+2]=le[2],t[r+3]=le[3]}function ks(e,t){return le[0]=e[t],le[1]=e[t+1],le[2]=e[t+2],le[3]=e[t+3],bo[0]}var wo=new Float64Array([-0]),dt=new Uint8Array(wo.buffer);function Ks(e,t,r){wo[0]=e,t[r]=dt[0],t[r+1]=dt[1],t[r+2]=dt[2],t[r+3]=dt[3],t[r+4]=dt[4],t[r+5]=dt[5],t[r+6]=dt[6],t[r+7]=dt[7]}function Os(e,t){return dt[0]=e[t],dt[1]=e[t+1],dt[2]=e[t+2],dt[3]=e[t+3],dt[4]=e[t+4],dt[5]=e[t+5],dt[6]=e[t+6],dt[7]=e[t+7],wo[0]}var Mf=BigInt(Number.MAX_SAFE_INTEGER),Pf=BigInt(Number.MIN_SAFE_INTEGER),St=class e{lo;hi;constructor(t,r){this.lo=t|0,this.hi=r|0}toNumber(t=!1){if(!t&&this.hi>>>31>0){let r=~this.lo+1>>>0,n=~this.hi>>>0;return r===0&&(n=n+1>>>0),-(r+n*4294967296)}return this.lo+this.hi*4294967296}toBigInt(t=!1){if(t)return BigInt(this.lo>>>0)+(BigInt(this.hi>>>0)<<32n);if(this.hi>>>31){let r=~this.lo+1>>>0,n=~this.hi>>>0;return r===0&&(n=n+1>>>0),-(BigInt(r)+(BigInt(n)<<32n))}return BigInt(this.lo>>>0)+(BigInt(this.hi>>>0)<<32n)}toString(t=!1){return this.toBigInt(t).toString()}zzEncode(){let t=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^t)>>>0,this.lo=(this.lo<<1^t)>>>0,this}zzDecode(){let t=-(this.lo&1);return this.lo=((this.lo>>>1|this.hi<<31)^t)>>>0,this.hi=(this.hi>>>1^t)>>>0,this}length(){let t=this.lo,r=(this.lo>>>28|this.hi<<4)>>>0,n=this.hi>>>24;return n===0?r===0?t<16384?t<128?1:2:t<2097152?3:4:r<16384?r<128?5:6:r<2097152?7:8:n<128?9:10}static fromBigInt(t){if(t===0n)return Ae;if(t<Mf&&t>Pf)return this.fromNumber(Number(t));let r=t<0n;r&&(t=-t);let n=t>>32n,o=t-(n<<32n);return r&&(n=~n|0n,o=~o|0n,++o>Vs&&(o=0n,++n>Vs&&(n=0n))),new e(Number(o),Number(n))}static fromNumber(t){if(t===0)return Ae;let r=t<0;r&&(t=-t);let n=t>>>0,o=(t-n)/4294967296>>>0;return r&&(o=~o>>>0,n=~n>>>0,++n>4294967295&&(n=0,++o>4294967295&&(o=0))),new e(n,o)}static from(t){return typeof t=="number"?e.fromNumber(t):typeof t=="bigint"?e.fromBigInt(t):typeof t=="string"?e.fromBigInt(BigInt(t)):t.low!=null||t.high!=null?new e(t.low>>>0,t.high>>>0):Ae}},Ae=new St(0,0);Ae.toBigInt=function(){return 0n};Ae.zzEncode=Ae.zzDecode=function(){return this};Ae.length=function(){return 1};var Vs=4294967296n;function Ms(e){let t=0,r=0;for(let n=0;n<e.length;++n)r=e.charCodeAt(n),r<128?t+=1:r<2048?t+=2:(r&64512)===55296&&(e.charCodeAt(n+1)&64512)===56320?(++n,t+=4):t+=3;return t}function Ps(e,t,r){if(r-t<1)return"";let o,i=[],s=0,a;for(;t<r;)a=e[t++],a<128?i[s++]=a:a>191&&a<224?i[s++]=(a&31)<<6|e[t++]&63:a>239&&a<365?(a=((a&7)<<18|(e[t++]&63)<<12|(e[t++]&63)<<6|e[t++]&63)-65536,i[s++]=55296+(a>>10),i[s++]=56320+(a&1023)):i[s++]=(a&15)<<12|(e[t++]&63)<<6|e[t++]&63,s>8191&&((o??(o=[])).push(String.fromCharCode.apply(String,i)),s=0);return o!=null?(s>0&&o.push(String.fromCharCode.apply(String,i.slice(0,s))),o.join("")):String.fromCharCode.apply(String,i.slice(0,s))}function Eo(e,t,r){let n=r,o,i;for(let s=0;s<e.length;++s)o=e.charCodeAt(s),o<128?t[r++]=o:o<2048?(t[r++]=o>>6|192,t[r++]=o&63|128):(o&64512)===55296&&((i=e.charCodeAt(s+1))&64512)===56320?(o=65536+((o&1023)<<10)+(i&1023),++s,t[r++]=o>>18|240,t[r++]=o>>12&63|128,t[r++]=o>>6&63|128,t[r++]=o&63|128):(t[r++]=o>>12|224,t[r++]=o>>6&63|128,t[r++]=o&63|128);return r-n}function Dt(e,t){return RangeError(`index out of range: ${e.pos} + ${t??1} > ${e.len}`)}function Xr(e,t){return(e[t-4]|e[t-3]<<8|e[t-2]<<16|e[t-1]<<24)>>>0}var So=class{buf;pos;len;_slice=Uint8Array.prototype.subarray;constructor(t){this.buf=t,this.pos=0,this.len=t.length}uint32(){let t=4294967295;if(t=(this.buf[this.pos]&127)>>>0,this.buf[this.pos++]<128||(t=(t|(this.buf[this.pos]&127)<<7)>>>0,this.buf[this.pos++]<128)||(t=(t|(this.buf[this.pos]&127)<<14)>>>0,this.buf[this.pos++]<128)||(t=(t|(this.buf[this.pos]&127)<<21)>>>0,this.buf[this.pos++]<128)||(t=(t|(this.buf[this.pos]&15)<<28)>>>0,this.buf[this.pos++]<128))return t;if((this.pos+=5)>this.len)throw this.pos=this.len,Dt(this,10);return t}int32(){return this.uint32()|0}sint32(){let t=this.uint32();return t>>>1^-(t&1)|0}bool(){return this.uint32()!==0}fixed32(){if(this.pos+4>this.len)throw Dt(this,4);return Xr(this.buf,this.pos+=4)}sfixed32(){if(this.pos+4>this.len)throw Dt(this,4);return Xr(this.buf,this.pos+=4)|0}float(){if(this.pos+4>this.len)throw Dt(this,4);let t=ks(this.buf,this.pos);return this.pos+=4,t}double(){if(this.pos+8>this.len)throw Dt(this,4);let t=Os(this.buf,this.pos);return this.pos+=8,t}bytes(){let t=this.uint32(),r=this.pos,n=this.pos+t;if(n>this.len)throw Dt(this,t);return this.pos+=t,r===n?new Uint8Array(0):this.buf.subarray(r,n)}string(){let t=this.bytes();return Ps(t,0,t.length)}skip(t){if(typeof t=="number"){if(this.pos+t>this.len)throw Dt(this,t);this.pos+=t}else do if(this.pos>=this.len)throw Dt(this);while((this.buf[this.pos++]&128)!==0);return this}skipType(t){switch(t){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;(t=this.uint32()&7)!==4;)this.skipType(t);break;case 5:this.skip(4);break;default:throw Error(`invalid wire type ${t} at offset ${this.pos}`)}return this}readLongVarint(){let t=new St(0,0),r=0;if(this.len-this.pos>4){for(;r<4;++r)if(t.lo=(t.lo|(this.buf[this.pos]&127)<<r*7)>>>0,this.buf[this.pos++]<128)return t;if(t.lo=(t.lo|(this.buf[this.pos]&127)<<28)>>>0,t.hi=(t.hi|(this.buf[this.pos]&127)>>4)>>>0,this.buf[this.pos++]<128)return t;r=0}else{for(;r<3;++r){if(this.pos>=this.len)throw Dt(this);if(t.lo=(t.lo|(this.buf[this.pos]&127)<<r*7)>>>0,this.buf[this.pos++]<128)return t}return t.lo=(t.lo|(this.buf[this.pos++]&127)<<r*7)>>>0,t}if(this.len-this.pos>4){for(;r<5;++r)if(t.hi=(t.hi|(this.buf[this.pos]&127)<<r*7+3)>>>0,this.buf[this.pos++]<128)return t}else for(;r<5;++r){if(this.pos>=this.len)throw Dt(this);if(t.hi=(t.hi|(this.buf[this.pos]&127)<<r*7+3)>>>0,this.buf[this.pos++]<128)return t}throw Error("invalid varint encoding")}readFixed64(){if(this.pos+8>this.len)throw Dt(this,8);let t=Xr(this.buf,this.pos+=4),r=Xr(this.buf,this.pos+=4);return new St(t,r)}int64(){return this.readLongVarint().toBigInt()}int64Number(){return this.readLongVarint().toNumber()}int64String(){return this.readLongVarint().toString()}uint64(){return this.readLongVarint().toBigInt(!0)}uint64Number(){let t=Rs(this.buf,this.pos);return this.pos+=mr(t),t}uint64String(){return this.readLongVarint().toString(!0)}sint64(){return this.readLongVarint().zzDecode().toBigInt()}sint64Number(){return this.readLongVarint().zzDecode().toNumber()}sint64String(){return this.readLongVarint().zzDecode().toString()}fixed64(){return this.readFixed64().toBigInt()}fixed64Number(){return this.readFixed64().toNumber()}fixed64String(){return this.readFixed64().toString()}sfixed64(){return this.readFixed64().toBigInt()}sfixed64Number(){return this.readFixed64().toNumber()}sfixed64String(){return this.readFixed64().toString()}};function Ao(e){return new So(e instanceof Uint8Array?e:e.subarray())}function qe(e,t,r){let n=Ao(e);return t.decode(n,void 0,r)}function vo(e){let t=e??8192,r=t>>>1,n,o=t;return function(s){if(s<1||s>r)return wt(s);o+s>t&&(n=wt(t),o=0);let a=n.subarray(o,o+=s);return(o&7)!==0&&(o=(o|7)+1),a}}var ve=class{fn;len;next;val;constructor(t,r,n){this.fn=t,this.len=r,this.next=void 0,this.val=n}};function Bo(){}var To=class{head;tail;len;next;constructor(t){this.head=t.head,this.tail=t.tail,this.len=t.len,this.next=t.states}},Ff=vo();function qf(e){return globalThis.Buffer!=null?wt(e):Ff(e)}var gr=class{len;head;tail;states;constructor(){this.len=0,this.head=new ve(Bo,0,0),this.tail=this.head,this.states=null}_push(t,r,n){return this.tail=this.tail.next=new ve(t,r,n),this.len+=r,this}uint32(t){return this.len+=(this.tail=this.tail.next=new Io((t=t>>>0)<128?1:t<16384?2:t<2097152?3:t<268435456?4:5,t)).len,this}int32(t){return t<0?this._push(Wr,10,St.fromNumber(t)):this.uint32(t)}sint32(t){return this.uint32((t<<1^t>>31)>>>0)}uint64(t){let r=St.fromBigInt(t);return this._push(Wr,r.length(),r)}uint64Number(t){return this._push(Ds,mr(t),t)}uint64String(t){return this.uint64(BigInt(t))}int64(t){return this.uint64(t)}int64Number(t){return this.uint64Number(t)}int64String(t){return this.uint64String(t)}sint64(t){let r=St.fromBigInt(t).zzEncode();return this._push(Wr,r.length(),r)}sint64Number(t){let r=St.fromNumber(t).zzEncode();return this._push(Wr,r.length(),r)}sint64String(t){return this.sint64(BigInt(t))}bool(t){return this._push(Co,1,t?1:0)}fixed32(t){return this._push(yr,4,t>>>0)}sfixed32(t){return this.fixed32(t)}fixed64(t){let r=St.fromBigInt(t);return this._push(yr,4,r.lo)._push(yr,4,r.hi)}fixed64Number(t){let r=St.fromNumber(t);return this._push(yr,4,r.lo)._push(yr,4,r.hi)}fixed64String(t){return this.fixed64(BigInt(t))}sfixed64(t){return this.fixed64(t)}sfixed64Number(t){return this.fixed64Number(t)}sfixed64String(t){return this.fixed64String(t)}float(t){return this._push(Ns,4,t)}double(t){return this._push(Ks,8,t)}bytes(t){let r=t.length>>>0;return r===0?this._push(Co,1,0):this.uint32(r)._push($f,r,t)}string(t){let r=Ms(t);return r!==0?this.uint32(r)._push(Eo,r,t):this._push(Co,1,0)}fork(){return this.states=new To(this),this.head=this.tail=new ve(Bo,0,0),this.len=0,this}reset(){return this.states!=null?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new ve(Bo,0,0),this.len=0),this}ldelim(){let t=this.head,r=this.tail,n=this.len;return this.reset().uint32(n),n!==0&&(this.tail.next=t.next,this.tail=r,this.len+=n),this}finish(){let t=this.head.next,r=qf(this.len),n=0;for(;t!=null;)t.fn(t.val,r,n),n+=t.len,t=t.next;return r}};function Co(e,t,r){t[r]=e&255}function Hf(e,t,r){for(;e>127;)t[r++]=e&127|128,e>>>=7;t[r]=e}var Io=class extends ve{next;constructor(t,r){super(Hf,t,r),this.next=void 0}};function Wr(e,t,r){for(;e.hi!==0;)t[r++]=e.lo&127|128,e.lo=(e.lo>>>7|e.hi<<25)>>>0,e.hi>>>=7;for(;e.lo>127;)t[r++]=e.lo&127|128,e.lo=e.lo>>>7;t[r++]=e.lo}function yr(e,t,r){t[r]=e&255,t[r+1]=e>>>8&255,t[r+2]=e>>>16&255,t[r+3]=e>>>24}function $f(e,t,r){t.set(e,r)}globalThis.Buffer!=null&&(gr.prototype.bytes=function(e){let t=e.length>>>0;return this.uint32(t),t>0&&this._push(zf,t,e),this},gr.prototype.string=function(e){let t=globalThis.Buffer.byteLength(e);return this.uint32(t),t>0&&this._push(Zf,t,e),this});function zf(e,t,r){t.set(e,r)}function Zf(e,t,r){e.length<40?Eo(e,t,r):t.utf8Write!=null?t.utf8Write(e,r):t.set(Z(e),r)}function _o(){return new gr}function He(e,t){let r=_o();return t.encode(e,r,{lengthDelimited:!1}),r.finish()}var $e;(function(e){e[e.VARINT=0]="VARINT",e[e.BIT64=1]="BIT64",e[e.LENGTH_DELIMITED=2]="LENGTH_DELIMITED",e[e.START_GROUP=3]="START_GROUP",e[e.END_GROUP=4]="END_GROUP",e[e.BIT32=5]="BIT32"})($e||($e={}));function Jr(e,t,r,n){return{name:e,type:t,encode:r,decode:n}}function xr(e){function t(o){if(e[o.toString()]==null)throw new Error("Invalid enum value");return e[o]}let r=function(i,s){let a=t(i);s.int32(a)},n=function(i){let s=i.int32();return t(s)};return Jr("enum",$e.VARINT,r,n)}function ze(e,t){return Jr("message",$e.LENGTH_DELIMITED,e,t)}var it;(function(e){e.RSA="RSA",e.Ed25519="Ed25519",e.secp256k1="secp256k1",e.ECDSA="ECDSA"})(it||(it={}));var Uo;(function(e){e[e.RSA=0]="RSA",e[e.Ed25519=1]="Ed25519",e[e.secp256k1=2]="secp256k1",e[e.ECDSA=3]="ECDSA"})(Uo||(Uo={}));(function(e){e.codec=()=>xr(Uo)})(it||(it={}));var jt;(function(e){let t;e.codec=()=>(t==null&&(t=ze((r,n,o={})=>{o.lengthDelimited!==!1&&n.fork(),r.Type!=null&&(n.uint32(8),it.codec().encode(r.Type,n)),r.Data!=null&&(n.uint32(18),n.bytes(r.Data)),o.lengthDelimited!==!1&&n.ldelim()},(r,n,o={})=>{let i={},s=n==null?r.len:r.pos+n;for(;r.pos<s;){let a=r.uint32();switch(a>>>3){case 1:{i.Type=it.codec().decode(r);break}case 2:{i.Data=r.bytes();break}default:{r.skipType(a&7);break}}}return i})),t),e.encode=r=>He(r,e.codec()),e.decode=(r,n)=>qe(r,e.codec(),n)})(jt||(jt={}));var Lo;(function(e){let t;e.codec=()=>(t==null&&(t=ze((r,n,o={})=>{o.lengthDelimited!==!1&&n.fork(),r.Type!=null&&(n.uint32(8),it.codec().encode(r.Type,n)),r.Data!=null&&(n.uint32(18),n.bytes(r.Data)),o.lengthDelimited!==!1&&n.ldelim()},(r,n,o={})=>{let i={},s=n==null?r.len:r.pos+n;for(;r.pos<s;){let a=r.uint32();switch(a>>>3){case 1:{i.Type=it.codec().decode(r);break}case 2:{i.Data=r.bytes();break}default:{r.skipType(a&7);break}}}return i})),t),e.encode=r=>He(r,e.codec()),e.decode=(r,n)=>qe(r,e.codec(),n)})(Lo||(Lo={}));var wr={};mt(wr,{MAX_RSA_KEY_SIZE:()=>Do,generateRSAKeyPair:()=>Zs,jwkToJWKKeyPair:()=>Gs,jwkToPkcs1:()=>Xf,jwkToPkix:()=>Ko,jwkToRSAPrivateKey:()=>Po,pkcs1MessageToJwk:()=>No,pkcs1MessageToRSAPrivateKey:()=>Oo,pkcs1ToJwk:()=>jf,pkcs1ToRSAPrivateKey:()=>zs,pkixMessageToJwk:()=>ko,pkixMessageToRSAPublicKey:()=>Mo,pkixToJwk:()=>Wf,pkixToRSAPublicKey:()=>Vo});var Ze=class{type="RSA";jwk;_raw;_multihash;constructor(t,r){this.jwk=t,this._multihash=r}get raw(){return this._raw==null&&(this._raw=wr.jwkToPkix(this.jwk)),this._raw}toMultihash(){return this._multihash}toCID(){return ct.createV1(114,this._multihash)}toString(){return et.encode(this.toMultihash().bytes).substring(1)}equals(t){return t==null||!(t.raw instanceof Uint8Array)?!1:yt(this.raw,t.raw)}verify(t,r,n){return $s(this.jwk,r,t,n)}},br=class{type="RSA";jwk;_raw;publicKey;constructor(t,r){this.jwk=t,this.publicKey=r}get raw(){return this._raw==null&&(this._raw=wr.jwkToPkcs1(this.jwk)),this._raw}equals(t){return t==null||!(t.raw instanceof Uint8Array)?!1:yt(this.raw,t.raw)}sign(t,r){return Hs(this.jwk,t,r)}};var Do=8192,Ro=18,Gf=1062,Yf=Uint8Array.from([48,13,6,9,42,134,72,134,247,13,1,1,1,5,0]);function jf(e){let t=qt(e);return No(t)}function No(e){return{n:Q(e[1],"base64url"),e:Q(e[2],"base64url"),d:Q(e[3],"base64url"),p:Q(e[4],"base64url"),q:Q(e[5],"base64url"),dp:Q(e[6],"base64url"),dq:Q(e[7],"base64url"),qi:Q(e[8],"base64url"),kty:"RSA"}}function Xf(e){if(e.n==null||e.e==null||e.d==null||e.p==null||e.q==null||e.dp==null||e.dq==null||e.qi==null)throw new rt("JWK was missing components");return ne([gt(Uint8Array.from([0])),gt(Z(e.n,"base64url")),gt(Z(e.e,"base64url")),gt(Z(e.d,"base64url")),gt(Z(e.p,"base64url")),gt(Z(e.q,"base64url")),gt(Z(e.dp,"base64url")),gt(Z(e.dq,"base64url")),gt(Z(e.qi,"base64url"))]).subarray()}function Wf(e){let t=qt(e,{offset:0});return ko(t)}function ko(e){let t=qt(e[1],{offset:0});return{kty:"RSA",n:Q(t[0],"base64url"),e:Q(t[1],"base64url")}}function Ko(e){if(e.n==null||e.e==null)throw new rt("JWK was missing components");return ne([Yf,Or(ne([gt(Z(e.n,"base64url")),gt(Z(e.e,"base64url"))]))]).subarray()}function zs(e){let t=qt(e);return Oo(t)}function Oo(e){let t=No(e);return Po(t)}function Vo(e,t){if(e.byteLength>=Gf)throw new Te("Key size is too large");let r=qt(e,{offset:0});return Mo(r,e,t)}function Mo(e,t,r){let n=ko(e);if(r==null){let o=Ke(jt.encode({Type:it.RSA,Data:t}));r=Kt(Ro,o)}return new Ze(n,r)}function Po(e){if(js(e)>Do)throw new rt("Key size is too large");let t=Gs(e),r=Ke(jt.encode({Type:it.RSA,Data:Ko(t.publicKey)})),n=Kt(Ro,r);return new br(t.privateKey,new Ze(t.publicKey,n))}async function Zs(e){if(e>Do)throw new rt("Key size is too large");let t=await Ys(e),r=Ke(jt.encode({Type:it.RSA,Data:Ko(t.publicKey)})),n=Kt(Ro,r);return new br(t.privateKey,new Ze(t.publicKey,n))}function Gs(e){if(e==null)throw new rt("Missing key parameter");return{privateKey:e,publicKey:{kty:e.kty,n:e.n,e:e.e}}}async function Ys(e,t){let r=await It.get().subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:e,publicExponent:new Uint8Array([1,0,1]),hash:{name:"SHA-256"}},!0,["sign","verify"]);t?.signal?.throwIfAborted();let n=await Jf(r,t);return{privateKey:n[0],publicKey:n[1]}}async function Hs(e,t,r){let n=await It.get().subtle.importKey("jwk",e,{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},!1,["sign"]);r?.signal?.throwIfAborted();let o=await It.get().subtle.sign({name:"RSASSA-PKCS1-v1_5"},n,t instanceof Uint8Array?t:t.subarray());return r?.signal?.throwIfAborted(),new Uint8Array(o,0,o.byteLength)}async function $s(e,t,r,n){let o=await It.get().subtle.importKey("jwk",e,{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},!1,["verify"]);n?.signal?.throwIfAborted();let i=await It.get().subtle.verify({name:"RSASSA-PKCS1-v1_5"},o,t,r instanceof Uint8Array?r:r.subarray());return n?.signal?.throwIfAborted(),i}async function Jf(e,t){if(e.privateKey==null||e.publicKey==null)throw new rt("Private and public key are required");let r=await Promise.all([It.get().subtle.exportKey("jwk",e.privateKey),It.get().subtle.exportKey("jwk",e.publicKey)]);return t?.signal?.throwIfAborted(),r}function js(e){if(e.kty!=="RSA")throw new rt("invalid key type");if(e.n==null)throw new rt("invalid key modulus");return Z(e.n,"base64url").length*8}var Qr=class{oHash;iHash;blockLen;outputLen;finished=!1;destroyed=!1;constructor(t,r){if(Vr(t),H(r,void 0,"key"),this.iHash=t.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;let n=this.blockLen,o=new Uint8Array(n);o.set(r.length>n?t.create().update(r).digest():r);for(let i=0;i<o.length;i++)o[i]^=54;this.iHash.update(o),this.oHash=t.create();for(let i=0;i<o.length;i++)o[i]^=106;this.oHash.update(o),$t(o)}update(t){return Ne(this),this.iHash.update(t),this}digestInto(t){Ne(this),H(t,this.outputLen,"output"),this.finished=!0,this.iHash.digestInto(t),this.oHash.update(t),this.oHash.digestInto(t),this.destroy()}digest(){let t=new Uint8Array(this.oHash.outputLen);return this.digestInto(t),t}_cloneInto(t){t||=Object.create(Object.getPrototypeOf(this),{});let{oHash:r,iHash:n,finished:o,destroyed:i,blockLen:s,outputLen:a}=this;return t=t,t.finished=o,t.destroyed=i,t.blockLen=s,t.outputLen=a,t.oHash=r._cloneInto(t.oHash),t.iHash=n._cloneInto(t.iHash),t}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}},Fo=(e,t,r)=>new Qr(e,t).update(r).digest();Fo.create=(e,t)=>new Qr(e,t);var Xs=(e,t)=>(e+(e>=0?t:-t)/Ws)/t;function Qf(e,t,r){let[[n,o],[i,s]]=t,a=Xs(s*e,r),c=Xs(-o*e,r),d=e-a*n-c*i,u=-a*o-c*s,f=d<Xt,w=u<Xt;f&&(d=-d),w&&(u=-u);let C=lr(Math.ceil(io(r)/2))+Ge;if(d<Xt||d>=C||u<Xt||u>=C)throw new Error("splitScalar (endomorphism): failed, k="+e);return{k1neg:f,k1:d,k2neg:w,k2:u}}function Ho(e){if(!["compact","recovered","der"].includes(e))throw new Error('Signature format must be "compact", "recovered", or "der"');return e}function qo(e,t){let r={};for(let n of Object.keys(t))r[n]=e[n]===void 0?t[n]:e[n];return Yt(r.lowS,"lowS"),Yt(r.prehash,"prehash"),r.format!==void 0&&Ho(r.format),r}var $o=class extends Error{constructor(t=""){super(t)}},de={Err:$o,_tlv:{encode:(e,t)=>{let{Err:r}=de;if(e<0||e>256)throw new r("tlv.encode: wrong tag");if(t.length&1)throw new r("tlv.encode: unpadded data");let n=t.length/2,o=ur(n);if(o.length/2&128)throw new r("tlv.encode: long form length too big");let i=n>127?ur(o.length/2|128):"";return ur(e)+i+o+t},decode(e,t){let{Err:r}=de,n=0;if(e<0||e>256)throw new r("tlv.encode: wrong tag");if(t.length<2||t[n++]!==e)throw new r("tlv.decode: wrong tlv");let o=t[n++],i=!!(o&128),s=0;if(!i)s=o;else{let c=o&127;if(!c)throw new r("tlv.decode(long): indefinite length not supported");if(c>4)throw new r("tlv.decode(long): byte length is too big");let d=t.subarray(n,n+c);if(d.length!==c)throw new r("tlv.decode: length bytes not complete");if(d[0]===0)throw new r("tlv.decode(long): zero leftmost byte");for(let u of d)s=s<<8|u;if(n+=c,s<128)throw new r("tlv.decode(long): not minimal encoding")}let a=t.subarray(n,n+s);if(a.length!==s)throw new r("tlv.decode: wrong value length");return{v:a,l:t.subarray(n+s)}}},_int:{encode(e){let{Err:t}=de;if(e<Xt)throw new t("integer: negative integers are not allowed");let r=ur(e);if(Number.parseInt(r[0],16)&8&&(r="00"+r),r.length&1)throw new t("unexpected DER parsing assertion: unpadded hex");return r},decode(e){let{Err:t}=de;if(e[0]&128)throw new t("invalid signature integer: negative");if(e[0]===0&&!(e[1]&128))throw new t("invalid signature integer: unnecessary leading zero");return Oe(e)}},toSig(e){let{Err:t,_int:r,_tlv:n}=de,o=H(e,void 0,"signature"),{v:i,l:s}=n.decode(48,o);if(s.length)throw new t("invalid signature: left bytes after parsing");let{v:a,l:c}=n.decode(2,i),{v:d,l:u}=n.decode(2,c);if(u.length)throw new t("invalid signature: left bytes after parsing");return{r:r.decode(a),s:r.decode(d)}},hexFromSig(e){let{_tlv:t,_int:r}=de,n=t.encode(2,r.encode(e.r)),o=t.encode(2,r.encode(e.s)),i=n+o;return t.encode(48,i)}},Xt=BigInt(0),Ge=BigInt(1),Ws=BigInt(2),tn=BigInt(3),tl=BigInt(4);function Js(e,t={}){let r=$r("weierstrass",e,t),{Fp:n,Fn:o}=r,i=r.CURVE,{h:s,n:a}=i;ce(t,{},{allowInfinityPoint:"boolean",clearCofactor:"function",isTorsionFree:"function",fromBytes:"function",toBytes:"function",endo:"object"});let{endo:c}=t;if(c&&(!n.is0(i.a)||typeof c.beta!="bigint"||!Array.isArray(c.basises)))throw new Error('invalid endo: expected "beta": bigint and "basises": array');let d=ta(n,o);function u(){if(!n.isOdd)throw new Error("compression is not supported: Field does not have .isOdd()")}function f(A,m,y){let{x:l,y:E}=m.toAffine(),L=n.toBytes(l);if(Yt(y,"isCompressed"),y){u();let R=!n.isOdd(E);return xt(Qs(R),L)}else return xt(Uint8Array.of(4),L,n.toBytes(E))}function w(A){H(A,void 0,"Point");let{publicKey:m,publicKeyUncompressed:y}=d,l=A.length,E=A[0],L=A.subarray(1);if(l===m&&(E===2||E===3)){let R=n.fromBytes(L);if(!n.isValid(R))throw new Error("bad point: is not on curve, wrong x");let k=v(R),K;try{K=n.sqrt(k)}catch(j){let G=j instanceof Error?": "+j.message:"";throw new Error("bad point: is not on curve, sqrt error"+G)}u();let V=n.isOdd(K);return(E&1)===1!==V&&(K=n.neg(K)),{x:R,y:K}}else if(l===y&&E===4){let R=n.BYTES,k=n.fromBytes(L.subarray(0,R)),K=n.fromBytes(L.subarray(R,R*2));if(!B(k,K))throw new Error("bad point: is not on curve");return{x:k,y:K}}else throw new Error(`bad point: got length ${l}, expected compressed=${m} or uncompressed=${y}`)}let C=t.toBytes||f,x=t.fromBytes||w;function v(A){let m=n.sqr(A),y=n.mul(m,A);return n.add(n.add(y,n.mul(A,i.a)),i.b)}function B(A,m){let y=n.sqr(m),l=v(A);return n.eql(y,l)}if(!B(i.Gx,i.Gy))throw new Error("bad curve params: generator point");let b=n.mul(n.pow(i.a,tn),tl),I=n.mul(n.sqr(i.b),BigInt(27));if(n.is0(n.add(b,I)))throw new Error("bad curve params: a or b");function S(A,m,y=!1){if(!n.isValid(m)||y&&n.is0(m))throw new Error(`bad point coordinate ${A}`);return m}function D(A){if(!(A instanceof p))throw new Error("Weierstrass Point expected")}function O(A){if(!c||!c.basises)throw new Error("no endo");return Qf(A,c.basises,o.ORDER)}let M=Ve((A,m)=>{let{X:y,Y:l,Z:E}=A;if(n.eql(E,n.ONE))return{x:y,y:l};let L=A.is0();m==null&&(m=L?n.ONE:n.inv(E));let R=n.mul(y,m),k=n.mul(l,m),K=n.mul(E,m);if(L)return{x:n.ZERO,y:n.ZERO};if(!n.eql(K,n.ONE))throw new Error("invZ was invalid");return{x:R,y:k}}),F=Ve(A=>{if(A.is0()){if(t.allowInfinityPoint&&!n.is0(A.Y))return;throw new Error("bad point: ZERO")}let{x:m,y}=A.toAffine();if(!n.isValid(m)||!n.isValid(y))throw new Error("bad point: x or y not field elements");if(!B(m,y))throw new Error("bad point: equation left != right");if(!A.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});function h(A,m,y,l,E){return y=new p(n.mul(y.X,A),y.Y,y.Z),m=hr(l,m),y=hr(E,y),m.add(y)}class p{static BASE=new p(i.Gx,i.Gy,n.ONE);static ZERO=new p(n.ZERO,n.ONE,n.ZERO);static Fp=n;static Fn=o;X;Y;Z;constructor(m,y,l){this.X=S("x",m),this.Y=S("y",y,!0),this.Z=S("z",l),Object.freeze(this)}static CURVE(){return i}static fromAffine(m){let{x:y,y:l}=m||{};if(!m||!n.isValid(y)||!n.isValid(l))throw new Error("invalid affine point");if(m instanceof p)throw new Error("projective point not allowed");return n.is0(y)&&n.is0(l)?p.ZERO:new p(y,l,n.ONE)}static fromBytes(m){let y=p.fromAffine(x(H(m,void 0,"point")));return y.assertValidity(),y}static fromHex(m){return p.fromBytes(Zt(m))}get x(){return this.toAffine().x}get y(){return this.toAffine().y}precompute(m=8,y=!0){return U.createCache(this,m),y||this.multiply(tn),this}assertValidity(){F(this)}hasEvenY(){let{y:m}=this.toAffine();if(!n.isOdd)throw new Error("Field doesn't support isOdd");return!n.isOdd(m)}equals(m){D(m);let{X:y,Y:l,Z:E}=this,{X:L,Y:R,Z:k}=m,K=n.eql(n.mul(y,k),n.mul(L,E)),V=n.eql(n.mul(l,k),n.mul(R,E));return K&&V}negate(){return new p(this.X,n.neg(this.Y),this.Z)}double(){let{a:m,b:y}=i,l=n.mul(y,tn),{X:E,Y:L,Z:R}=this,k=n.ZERO,K=n.ZERO,V=n.ZERO,q=n.mul(E,E),j=n.mul(L,L),G=n.mul(R,R),$=n.mul(E,L);return $=n.add($,$),V=n.mul(E,R),V=n.add(V,V),k=n.mul(m,V),K=n.mul(l,G),K=n.add(k,K),k=n.sub(j,K),K=n.add(j,K),K=n.mul(k,K),k=n.mul($,k),V=n.mul(l,V),G=n.mul(m,G),$=n.sub(q,G),$=n.mul(m,$),$=n.add($,V),V=n.add(q,q),q=n.add(V,q),q=n.add(q,G),q=n.mul(q,$),K=n.add(K,q),G=n.mul(L,R),G=n.add(G,G),q=n.mul(G,$),k=n.sub(k,q),V=n.mul(G,j),V=n.add(V,V),V=n.add(V,V),new p(k,K,V)}add(m){D(m);let{X:y,Y:l,Z:E}=this,{X:L,Y:R,Z:k}=m,K=n.ZERO,V=n.ZERO,q=n.ZERO,j=i.a,G=n.mul(i.b,tn),$=n.mul(y,L),X=n.mul(l,R),at=n.mul(E,k),kt=n.add(y,l),W=n.add(L,R);kt=n.mul(kt,W),W=n.add($,X),kt=n.sub(kt,W),W=n.add(y,E);let lt=n.add(L,k);return W=n.mul(W,lt),lt=n.add($,at),W=n.sub(W,lt),lt=n.add(l,E),K=n.add(R,k),lt=n.mul(lt,K),K=n.add(X,at),lt=n.sub(lt,K),q=n.mul(j,W),K=n.mul(G,at),q=n.add(K,q),K=n.sub(X,q),q=n.add(X,q),V=n.mul(K,q),X=n.add($,$),X=n.add(X,$),at=n.mul(j,at),W=n.mul(G,W),X=n.add(X,at),at=n.sub($,at),at=n.mul(j,at),W=n.add(W,at),$=n.mul(X,W),V=n.add(V,$),$=n.mul(lt,W),K=n.mul(kt,K),K=n.sub(K,$),$=n.mul(kt,X),q=n.mul(lt,q),q=n.add(q,$),new p(K,V,q)}subtract(m){return this.add(m.negate())}is0(){return this.equals(p.ZERO)}multiply(m){let{endo:y}=t;if(!o.isValidNot0(m))throw new Error("invalid scalar: out of range");let l,E,L=R=>U.cached(this,R,k=>Se(p,k));if(y){let{k1neg:R,k1:k,k2neg:K,k2:V}=O(m),{p:q,f:j}=L(k),{p:G,f:$}=L(V);E=j.add($),l=h(y.beta,q,G,R,K)}else{let{p:R,f:k}=L(m);l=R,E=k}return Se(p,[l,E])[0]}multiplyUnsafe(m){let{endo:y}=t,l=this;if(!o.isValid(m))throw new Error("invalid scalar: out of range");if(m===Xt||l.is0())return p.ZERO;if(m===Ge)return l;if(U.hasCache(this))return this.multiply(m);if(y){let{k1neg:E,k1:L,k2neg:R,k2:k}=O(m),{p1:K,p2:V}=xs(p,l,L,k);return h(y.beta,K,V,E,R)}else return U.unsafe(l,m)}toAffine(m){return M(this,m)}isTorsionFree(){let{isTorsionFree:m}=t;return s===Ge?!0:m?m(p,this):U.unsafe(this,a).is0()}clearCofactor(){let{clearCofactor:m}=t;return s===Ge?this:m?m(p,this):this.multiplyUnsafe(s)}isSmallOrder(){return this.multiplyUnsafe(s).is0()}toBytes(m=!0){return Yt(m,"isCompressed"),this.assertValidity(),C(p,this,m)}toHex(m=!0){return zt(this.toBytes(m))}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}}let _=o.BITS,U=new Fe(p,t.endo?Math.ceil(_/2):_);return p.BASE.precompute(8),p}function Qs(e){return Uint8Array.of(e?2:3)}function ta(e,t){return{secretKey:t.BYTES,publicKey:1+e.BYTES,publicKeyUncompressed:1+2*e.BYTES,publicKeyHasPrefix:!0,signature:2*t.BYTES}}function el(e,t={}){let{Fn:r}=e,n=t.randomBytes||ke,o=Object.assign(ta(e.Fp,r),{seed:uo(r.ORDER)});function i(C){try{let x=r.fromBytes(C);return r.isValidNot0(x)}catch{return!1}}function s(C,x){let{publicKey:v,publicKeyUncompressed:B}=o;try{let b=C.length;return x===!0&&b!==v||x===!1&&b!==B?!1:!!e.fromBytes(C)}catch{return!1}}function a(C=n(o.seed)){return fo(H(C,o.seed,"seed"),r.ORDER)}function c(C,x=!0){return e.BASE.multiply(r.fromBytes(C)).toBytes(x)}function d(C){let{secretKey:x,publicKey:v,publicKeyUncompressed:B}=o;if(!ye(C)||"_lengths"in r&&r._lengths||x===v)return;let b=H(C,void 0,"key").length;return b===v||b===B}function u(C,x,v=!0){if(d(C)===!0)throw new Error("first arg must be private key");if(d(x)===!1)throw new Error("second arg must be public key");let B=r.fromBytes(C);return e.fromBytes(x).multiply(B).toBytes(v)}let f={isValidSecretKey:i,isValidPublicKey:s,randomSecretKey:a},w=zr(a,c);return Object.freeze({getPublicKey:c,getSharedSecret:u,keygen:w,Point:e,utils:f,lengths:o})}function ea(e,t,r={}){Vr(t),ce(r,{},{hmac:"function",lowS:"boolean",randomBytes:"function",bits2int:"function",bits2int_modN:"function"}),r=Object.assign({},r);let n=r.randomBytes||ke,o=r.hmac||((y,l)=>Fo(t,y,l)),{Fp:i,Fn:s}=e,{ORDER:a,BITS:c}=s,{keygen:d,getPublicKey:u,getSharedSecret:f,utils:w,lengths:C}=el(e,r),x={prehash:!0,lowS:typeof r.lowS=="boolean"?r.lowS:!0,format:"compact",extraEntropy:!1},v=a*Ws<i.ORDER;function B(y){let l=a>>Ge;return y>l}function b(y,l){if(!s.isValidNot0(l))throw new Error(`invalid signature ${y}: out of range 1..Point.Fn.ORDER`);return l}function I(){if(v)throw new Error('"recovered" sig type is not supported for cofactor >2 curves')}function S(y,l){Ho(l);let E=C.signature,L=l==="compact"?E:l==="recovered"?E+1:void 0;return H(y,L)}class D{r;s;recovery;constructor(l,E,L){if(this.r=b("r",l),this.s=b("s",E),L!=null){if(I(),![0,1,2,3].includes(L))throw new Error("invalid recovery id");this.recovery=L}Object.freeze(this)}static fromBytes(l,E=x.format){S(l,E);let L;if(E==="der"){let{r:V,s:q}=de.toSig(H(l));return new D(V,q)}E==="recovered"&&(L=l[0],E="compact",l=l.subarray(1));let R=C.signature/2,k=l.subarray(0,R),K=l.subarray(R,R*2);return new D(s.fromBytes(k),s.fromBytes(K),L)}static fromHex(l,E){return this.fromBytes(Zt(l),E)}assertRecovery(){let{recovery:l}=this;if(l==null)throw new Error("invalid recovery id: must be present");return l}addRecoveryBit(l){return new D(this.r,this.s,l)}recoverPublicKey(l){let{r:E,s:L}=this,R=this.assertRecovery(),k=R===2||R===3?E+a:E;if(!i.isValid(k))throw new Error("invalid recovery id: sig.r+curve.n != R.x");let K=i.toBytes(k),V=e.fromBytes(xt(Qs((R&1)===0),K)),q=s.inv(k),j=M(H(l,void 0,"msgHash")),G=s.create(-j*q),$=s.create(L*q),X=e.BASE.multiplyUnsafe(G).add(V.multiplyUnsafe($));if(X.is0())throw new Error("invalid recovery: point at infinify");return X.assertValidity(),X}hasHighS(){return B(this.s)}toBytes(l=x.format){if(Ho(l),l==="der")return Zt(de.hexFromSig(this));let{r:E,s:L}=this,R=s.toBytes(E),k=s.toBytes(L);return l==="recovered"?(I(),xt(Uint8Array.of(this.assertRecovery()),R,k)):xt(R,k)}toHex(l){return zt(this.toBytes(l))}}let O=r.bits2int||function(l){if(l.length>8192)throw new Error("input is too large");let E=Oe(l),L=l.length*8-c;return L>0?E>>BigInt(L):E},M=r.bits2int_modN||function(l){return s.create(O(l))},F=lr(c);function h(y){return fr("num < 2^"+c,y,Xt,F),s.toBytes(y)}function p(y,l){return H(y,void 0,"message"),l?H(t(y),void 0,"prehashed message"):y}function _(y,l,E){let{lowS:L,prehash:R,extraEntropy:k}=qo(E,x);y=p(y,R);let K=M(y),V=s.fromBytes(l);if(!s.isValidNot0(V))throw new Error("invalid private key");let q=[h(V),h(K)];if(k!=null&&k!==!1){let X=k===!0?n(C.secretKey):k;q.push(H(X,void 0,"extraEntropy"))}let j=xt(...q),G=K;function $(X){let at=O(X);if(!s.isValidNot0(at))return;let kt=s.inv(at),W=e.BASE.multiply(at).toAffine(),lt=s.create(W.x);if(lt===Xt)return;let _r=s.create(kt*s.create(G+lt*V));if(_r===Xt)return;let ai=(W.x===lt?0:2)|Number(W.y&Ge),ci=_r;return L&&B(_r)&&(ci=s.neg(_r),ai^=1),new D(lt,ci,v?void 0:ai)}return{seed:j,k2sig:$}}function U(y,l,E={}){let{seed:L,k2sig:R}=_(y,l,E);return es(t.outputLen,s.BYTES,o)(L,R).toBytes(E.format)}function A(y,l,E,L={}){let{lowS:R,prehash:k,format:K}=qo(L,x);if(E=H(E,void 0,"publicKey"),l=p(l,k),!ye(y)){let V=y instanceof D?", use sig.toBytes()":"";throw new Error("verify expects Uint8Array signature"+V)}S(y,K);try{let V=D.fromBytes(y,K),q=e.fromBytes(E);if(R&&V.hasHighS())return!1;let{r:j,s:G}=V,$=M(l),X=s.inv(G),at=s.create($*X),kt=s.create(j*X),W=e.BASE.multiplyUnsafe(at).add(q.multiplyUnsafe(kt));return W.is0()?!1:s.create(W.x)===j}catch{return!1}}function m(y,l,E={}){let{prehash:L}=qo(E,x);return l=p(l,L),D.fromBytes(y,"recovered").recoverPublicKey(l).toBytes()}return Object.freeze({keygen:d,getPublicKey:u,getSharedSecret:f,utils:w,lengths:C,Point:e,sign:U,verify:A,recoverPublicKey:m,Signature:D,hash:t})}var Zo={p:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),n:BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),h:BigInt(1),a:BigInt(0),b:BigInt(7),Gx:BigInt("0x79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"),Gy:BigInt("0x483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8")},rl={beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),basises:[[BigInt("0x3086d221a7d46bcde86c90e49284eb15"),-BigInt("0xe4437ed6010e88286f547fa90abfe4c3")],[BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),BigInt("0x3086d221a7d46bcde86c90e49284eb15")]]};var ra=BigInt(2);function nl(e){let t=Zo.p,r=BigInt(3),n=BigInt(6),o=BigInt(11),i=BigInt(22),s=BigInt(23),a=BigInt(44),c=BigInt(88),d=e*e*e%t,u=d*d*e%t,f=Y(u,r,t)*u%t,w=Y(f,r,t)*u%t,C=Y(w,ra,t)*d%t,x=Y(C,o,t)*C%t,v=Y(x,i,t)*x%t,B=Y(v,a,t)*v%t,b=Y(B,c,t)*B%t,I=Y(b,a,t)*v%t,S=Y(I,r,t)*u%t,D=Y(S,s,t)*x%t,O=Y(D,n,t)*d%t,M=Y(O,ra,t);if(!zo.eql(zo.sqr(M),e))throw new Error("Cannot find square root");return M}var zo=Me(Zo.p,{sqrt:nl}),ol=Js(Zo,{Fp:zo,endo:rl}),Ye=ea(ol,Ke);function na(e,t,r,n){let o=Mn.digest(r instanceof Uint8Array?r:r.subarray());if(Yr(o))return o.then(({digest:i})=>(n?.signal?.throwIfAborted(),Ye.verify(t,i,e,{prehash:!1,format:"der"}))).catch(i=>{throw i.name==="AbortError"?i:new pr(String(i))});try{return n?.signal?.throwIfAborted(),Ye.verify(t,o.digest,e,{prehash:!1,format:"der"})}catch(i){throw new pr(String(i))}}var en=class{type="secp256k1";raw;_key;constructor(t){this._key=ia(t),this.raw=oa(this._key)}toMultihash(){return me.digest(oe(this))}toCID(){return ct.createV1(114,this.toMultihash())}toString(){return et.encode(this.toMultihash().bytes).substring(1)}equals(t){return t==null||!(t.raw instanceof Uint8Array)?!1:yt(this.raw,t.raw)}verify(t,r,n){return na(this._key,r,t,n)}};function sa(e){return new en(e)}function oa(e){return Ye.Point.fromBytes(e).toBytes()}function ia(e){try{return Ye.Point.fromBytes(e),e}catch(t){throw new Te(String(t))}}function aa(e,t){let{Type:r,Data:n}=jt.decode(e),o=n??new Uint8Array;switch(r){case it.RSA:return Vo(o,t);case it.Ed25519:return Ts(o);case it.secp256k1:return sa(o);case it.ECDSA:return ki(o);default:throw new Dr}}function oe(e){return jt.encode({Type:it[e.type],Data:e.raw})}function il(e,t){if(typeof e=="string")return sl(e);if(typeof e=="number")return ul(e,t);throw Error(`Value provided to ms() must be a string or number. value=${JSON.stringify(e)}`)}var rn=il;function sl(e){if(typeof e!="string"||e.length===0||e.length>100)throw Error(`Value provided to ms.parse() must be a string with length between 1 and 99. value=${JSON.stringify(e)}`);let t=/^(?<value>-?\d*\.?\d+) *(?<unit>milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|months?|mo|years?|yrs?|y)?$/i.exec(e);if(!t?.groups)return NaN;let{value:r,unit:n="ms"}=t.groups,o=parseFloat(r),i=n.toLowerCase();switch(i){case"years":case"year":case"yrs":case"yr":case"y":return o*315576e5;case"months":case"month":case"mo":return o*26298e5;case"weeks":case"week":case"w":return o*6048e5;case"days":case"day":case"d":return o*864e5;case"hours":case"hour":case"hrs":case"hr":case"h":return o*36e5;case"minutes":case"minute":case"mins":case"min":case"m":return o*6e4;case"seconds":case"second":case"secs":case"sec":case"s":return o*1e3;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return o;default:throw Error(`Unknown unit "${i}" provided to ms.parse(). value=${JSON.stringify(e)}`)}}function al(e){let t=Math.abs(e);return t>=315576e5?`${Math.round(e/315576e5)}y`:t>=26298e5?`${Math.round(e/26298e5)}mo`:t>=6048e5?`${Math.round(e/6048e5)}w`:t>=864e5?`${Math.round(e/864e5)}d`:t>=36e5?`${Math.round(e/36e5)}h`:t>=6e4?`${Math.round(e/6e4)}m`:t>=1e3?`${Math.round(e/1e3)}s`:`${e}ms`}function cl(e){let t=Math.abs(e);return t>=315576e5?Be(e,t,315576e5,"year"):t>=26298e5?Be(e,t,26298e5,"month"):t>=6048e5?Be(e,t,6048e5,"week"):t>=864e5?Be(e,t,864e5,"day"):t>=36e5?Be(e,t,36e5,"hour"):t>=6e4?Be(e,t,6e4,"minute"):t>=1e3?Be(e,t,1e3,"second"):`${e} ms`}function ul(e,t){if(typeof e!="number"||!Number.isFinite(e))throw Error("Value provided to ms.format() must be of type number.");return t?.long?cl(e):al(e)}function Be(e,t,r,n){let o=t>=r*1.5;return`${Math.round(e/r)} ${n}${o?"s":""}`}function Go(e){r.debug=r,r.default=r,r.coerce=c,r.disable=i,r.enable=o,r.enabled=s,r.humanize=rn,r.destroy=d,Object.keys(e).forEach(u=>{r[u]=e[u]}),r.names=[],r.skips=[],r.formatters={};function t(u){let f=0;for(let w=0;w<u.length;w++)f=(f<<5)-f+u.charCodeAt(w),f|=0;return r.colors[Math.abs(f)%r.colors.length]}r.selectColor=t;function r(u){let f,w=null,C,x;function v(...B){if(!v.enabled)return;let b=v,I=Number(new Date),S=I-(f||I);b.diff=S,b.prev=f,b.curr=I,f=I,B[0]=r.coerce(B[0]),typeof B[0]!="string"&&B.unshift("%O");let D=0;B[0]=B[0].replace(/%([a-zA-Z%])/g,(M,F)=>{if(M==="%%")return"%";D++;let h=r.formatters[F];if(typeof h=="function"){let p=B[D];M=h.call(b,p),B.splice(D,1),D--}return M}),r.formatArgs.call(b,B),(b.log||r.log).apply(b,B)}return v.namespace=u,v.useColors=r.useColors(),v.color=r.selectColor(u),v.extend=n,v.destroy=r.destroy,Object.defineProperty(v,"enabled",{enumerable:!0,configurable:!1,get:()=>w!==null?w:(C!==r.namespaces&&(C=r.namespaces,x=r.enabled(u)),x),set:B=>{w=B}}),typeof r.init=="function"&&r.init(v),v}function n(u,f){let w=r(this.namespace+(typeof f>"u"?":":f)+u);return w.log=this.log,w}function o(u){r.save(u),r.namespaces=u,r.names=[],r.skips=[];let f,w=(typeof u=="string"?u:"").split(/[\s,]+/),C=w.length;for(f=0;f<C;f++)w[f]&&(u=w[f].replace(/\*/g,".*?"),u[0]==="-"?r.skips.push(new RegExp("^"+u.substr(1)+"$")):r.names.push(new RegExp("^"+u+"$")))}function i(){let u=[...r.names.map(a),...r.skips.map(a).map(f=>"-"+f)].join(",");return r.enable(""),u}function s(u){if(u[u.length-1]==="*")return!0;let f,w;for(f=0,w=r.skips.length;f<w;f++)if(r.skips[f].test(u))return!1;for(f=0,w=r.names.length;f<w;f++)if(r.names[f].test(u))return!0;return!1}function a(u){return u.toString().substring(2,u.toString().length-2).replace(/\.\*\?$/,"*")}function c(u){return u instanceof Error?u.stack??u.message:u}function d(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return r.setupFormatters(r.formatters),r.enable(r.load()),r}var nn=yl(),fl=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function ll(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent?.toLowerCase().match(/(edge|trident)\/(\d+)/)!=null?!1:typeof document<"u"&&document.documentElement?.style?.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent?.toLowerCase().match(/firefox\/(\d+)/)!=null&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent?.toLowerCase().match(/applewebkit\/(\d+)/)}function dl(e){if(e[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+e[0]+(this.useColors?"%c ":" ")+"+"+rn(this.diff),!this.useColors)return;let t="color: "+this.color;e.splice(1,0,t,"color: inherit");let r=0,n=0;e[0].replace(/%[a-zA-Z%]/g,o=>{o!=="%%"&&(r++,o==="%c"&&(n=r))}),e.splice(n,0,t)}var hl=console.debug??console.log??(()=>{});function pl(e){try{e?nn?.setItem("debug",e):nn?.removeItem("debug")}catch{}}function ml(){let e;try{e=nn?.getItem("debug")}catch{}return!e&&typeof globalThis.process<"u"&&"env"in globalThis.process&&(e=globalThis.process.env.DEBUG),e}function yl(){try{return localStorage}catch{}}function gl(e){e.j=function(t){try{return JSON.stringify(t)}catch(r){return"[UnexpectedJSONParseError]: "+r.message}}}var ca=Go({formatArgs:dl,save:pl,load:ml,useColors:ll,setupFormatters:gl,colors:fl,storage:nn,log:hl});var bt=ca;bt.formatters.b=e=>e==null?"undefined":et.baseEncode(e);bt.formatters.t=e=>e==null?"undefined":te.baseEncode(e);bt.formatters.m=e=>e==null?"undefined":Rn.baseEncode(e);bt.formatters.p=e=>e==null?"undefined":e.toString();bt.formatters.c=e=>e==null?"undefined":e.toString();bt.formatters.k=e=>e==null?"undefined":e.toString();bt.formatters.a=e=>e==null?"undefined":e.toString();bt.formatters.e=e=>{if(e==null)return"undefined";let t=ua(e.message),r=ua(e.stack);return t!=null&&r!=null?r.includes(t)?r:`${t}
${r}`:r??t??e.toString()};function xl(e){let t=()=>{};return t.enabled=!1,t.color="",t.diff=0,t.log=()=>{},t.namespace=e,t.destroy=()=>!0,t.extend=()=>t,t}function Er(e){let t=xl(`${e}:trace`);return bt.enabled(`${e}:trace`)&&bt.names.map(r=>r.toString()).find(r=>r.includes(":trace"))!=null&&(t=bt(`${e}:trace`)),Object.assign(bt(e),{error:bt(`${e}:error`),trace:t,newScope:r=>Er(`${e}:${r}`)})}function ua(e){if(e!=null&&(e=e.trim(),e.length!==0))return e}var oi=Kc(fa(),1);var on=class extends Error{static name="SignatureCreationError";constructor(t="Record signature creation failed"){super(t),this.name="SignatureCreationError"}},Wt=class extends Error{static name="SignatureVerificationError";constructor(t="Record signature verification failed"){super(t),this.name="SignatureVerificationError"}};var Sr=class extends Error{static name="UnsupportedValidityError";constructor(t="The validity type is unsupported"){super(t),this.name="UnsupportedValidityError"}};var Ar=class extends Error{static name="InvalidValueError";constructor(t="Value must be a valid content path starting with /"){super(t),this.name="InvalidValueError"}},sn=class extends Error{static name="InvalidRecordDataError";constructor(t="Invalid record data"){super(t),this.name="InvalidRecordDataError"}};var At;(function(e){let t;(function(o){o.EOL="EOL"})(t=e.ValidityType||(e.ValidityType={}));let r;(function(o){o[o.EOL=0]="EOL"})(r||(r={})),(function(o){o.codec=()=>xr(r)})(t=e.ValidityType||(e.ValidityType={}));let n;e.codec=()=>(n==null&&(n=ze((o,i,s={})=>{s.lengthDelimited!==!1&&i.fork(),o.value!=null&&(i.uint32(10),i.bytes(o.value)),o.signatureV1!=null&&(i.uint32(18),i.bytes(o.signatureV1)),o.validityType!=null&&(i.uint32(24),e.ValidityType.codec().encode(o.validityType,i)),o.validity!=null&&(i.uint32(34),i.bytes(o.validity)),o.sequence!=null&&(i.uint32(40),i.uint64(o.sequence)),o.ttl!=null&&(i.uint32(48),i.uint64(o.ttl)),o.pubKey!=null&&(i.uint32(58),i.bytes(o.pubKey)),o.signatureV2!=null&&(i.uint32(66),i.bytes(o.signatureV2)),o.data!=null&&(i.uint32(74),i.bytes(o.data)),s.lengthDelimited!==!1&&i.ldelim()},(o,i,s={})=>{let a={},c=i==null?o.len:o.pos+i;for(;o.pos<c;){let d=o.uint32();switch(d>>>3){case 1:{a.value=o.bytes();break}case 2:{a.signatureV1=o.bytes();break}case 3:{a.validityType=e.ValidityType.codec().decode(o);break}case 4:{a.validity=o.bytes();break}case 5:{a.sequence=o.uint64();break}case 6:{a.ttl=o.uint64();break}case 7:{a.pubKey=o.bytes();break}case 8:{a.signatureV2=o.bytes();break}case 9:{a.data=o.bytes();break}default:{o.skipType(d&7);break}}}return a})),n),e.encode=o=>He(o,e.codec()),e.decode=(o,i)=>qe(o,e.codec(),i)})(At||(At={}));var bl=["string","number","bigint","symbol"],wl=["Function","Generator","AsyncGenerator","GeneratorFunction","AsyncGeneratorFunction","AsyncFunction","Observable","Array","Buffer","Object","RegExp","Date","Error","Map","Set","WeakMap","WeakSet","ArrayBuffer","SharedArrayBuffer","DataView","Promise","URL","HTMLElement","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array","BigInt64Array","BigUint64Array"];function la(e){if(e===null)return"null";if(e===void 0)return"undefined";if(e===!0||e===!1)return"boolean";let t=typeof e;if(bl.includes(t))return t;if(t==="function")return"Function";if(Array.isArray(e))return"Array";if(El(e))return"Buffer";let r=Sl(e);return r||"Object"}function El(e){return e&&e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer.call(null,e)}function Sl(e){let t=Object.prototype.toString.call(e).slice(8,-1);if(wl.includes(t))return t}var g=class{constructor(t,r,n){this.major=t,this.majorEncoded=t<<5,this.name=r,this.terminal=n}toString(){return`Type[${this.major}].${this.name}`}compare(t){return this.major<t.major?-1:this.major>t.major?1:0}};g.uint=new g(0,"uint",!0);g.negint=new g(1,"negint",!0);g.bytes=new g(2,"bytes",!0);g.string=new g(3,"string",!0);g.array=new g(4,"array",!1);g.map=new g(5,"map",!1);g.tag=new g(6,"tag",!1);g.float=new g(7,"float",!0);g.false=new g(7,"false",!0);g.true=new g(7,"true",!0);g.null=new g(7,"null",!0);g.undefined=new g(7,"undefined",!0);g.break=new g(7,"break",!0);var N=class{constructor(t,r,n){this.type=t,this.value=r,this.encodedLength=n,this.encodedBytes=void 0,this.byteValue=void 0}toString(){return`Token[${this.type}].${this.value}`}};var je=globalThis.process&&!globalThis.process.browser&&globalThis.Buffer&&typeof globalThis.Buffer.isBuffer=="function",Al=new TextDecoder,vl=new TextEncoder;function an(e){return je&&globalThis.Buffer.isBuffer(e)}function jo(e){return e instanceof Uint8Array?an(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e:Uint8Array.from(e)}var ma=je?(e,t,r)=>r-t>64?globalThis.Buffer.from(e.subarray(t,r)).toString("utf8"):ha(e,t,r):(e,t,r)=>r-t>64?Al.decode(e.subarray(t,r)):ha(e,t,r),ya=je?e=>e.length>64?globalThis.Buffer.from(e):da(e):e=>e.length>64?vl.encode(e):da(e),Mt=e=>Uint8Array.from(e),Xe=je?(e,t,r)=>an(e)?new Uint8Array(e.subarray(t,r)):e.slice(t,r):(e,t,r)=>e.slice(t,r),ga=je?(e,t)=>(e=e.map(r=>r instanceof Uint8Array?r:globalThis.Buffer.from(r)),jo(globalThis.Buffer.concat(e,t))):(e,t)=>{let r=new Uint8Array(t),n=0;for(let o of e)n+o.length>r.length&&(o=o.subarray(0,r.length-n)),r.set(o,n),n+=o.length;return r},xa=je?e=>globalThis.Buffer.allocUnsafe(e):e=>new Uint8Array(e);function ba(e,t){if(an(e)&&an(t))return e.compare(t);for(let r=0;r<e.length;r++)if(e[r]!==t[r])return e[r]<t[r]?-1:1;return 0}function da(e){let t=[],r=0;for(let n=0;n<e.length;n++){let o=e.charCodeAt(n);o<128?t[r++]=o:o<2048?(t[r++]=o>>6|192,t[r++]=o&63|128):(o&64512)===55296&&n+1<e.length&&(e.charCodeAt(n+1)&64512)===56320?(o=65536+((o&1023)<<10)+(e.charCodeAt(++n)&1023),t[r++]=o>>18|240,t[r++]=o>>12&63|128,t[r++]=o>>6&63|128,t[r++]=o&63|128):(t[r++]=o>>12|224,t[r++]=o>>6&63|128,t[r++]=o&63|128)}return t}function ha(e,t,r){let n=[];for(;t<r;){let o=e[t],i=null,s=o>239?4:o>223?3:o>191?2:1;if(t+s<=r){let a,c,d,u;switch(s){case 1:o<128&&(i=o);break;case 2:a=e[t+1],(a&192)===128&&(u=(o&31)<<6|a&63,u>127&&(i=u));break;case 3:a=e[t+1],c=e[t+2],(a&192)===128&&(c&192)===128&&(u=(o&15)<<12|(a&63)<<6|c&63,u>2047&&(u<55296||u>57343)&&(i=u));break;case 4:a=e[t+1],c=e[t+2],d=e[t+3],(a&192)===128&&(c&192)===128&&(d&192)===128&&(u=(o&15)<<18|(a&63)<<12|(c&63)<<6|d&63,u>65535&&u<1114112&&(i=u))}}i===null?(i=65533,s=1):i>65535&&(i-=65536,n.push(i>>>10&1023|55296),i=56320|i&1023),n.push(i),t+=s}return Bl(n)}var pa=4096;function Bl(e){let t=e.length;if(t<=pa)return String.fromCharCode.apply(String,e);let r="",n=0;for(;n<t;)r+=String.fromCharCode.apply(String,e.slice(n,n+=pa));return r}var Cl=256,vr=class{constructor(t=Cl){this.chunkSize=t,this.cursor=0,this.maxCursor=-1,this.chunks=[],this._initReuseChunk=null}reset(){this.cursor=0,this.maxCursor=-1,this.chunks.length&&(this.chunks=[]),this._initReuseChunk!==null&&(this.chunks.push(this._initReuseChunk),this.maxCursor=this._initReuseChunk.length-1)}push(t){let r=this.chunks[this.chunks.length-1];if(this.cursor+t.length<=this.maxCursor+1){let o=r.length-(this.maxCursor-this.cursor)-1;r.set(t,o)}else{if(r){let o=r.length-(this.maxCursor-this.cursor)-1;o<r.length&&(this.chunks[this.chunks.length-1]=r.subarray(0,o),this.maxCursor=this.cursor-1)}t.length<64&&t.length<this.chunkSize?(r=xa(this.chunkSize),this.chunks.push(r),this.maxCursor+=r.length,this._initReuseChunk===null&&(this._initReuseChunk=r),r.set(t,0)):(this.chunks.push(t),this.maxCursor+=t.length)}this.cursor+=t.length}toBytes(t=!1){let r;if(this.chunks.length===1){let n=this.chunks[0];t&&this.cursor>n.length/2?(r=this.cursor===n.length?n:n.subarray(0,this.cursor),this._initReuseChunk=null,this.chunks=[]):r=Xe(n,0,this.cursor)}else r=ga(this.chunks,this.cursor);return t&&this.reset(),r}};var P="CBOR decode error:",Xo="CBOR encode error:",Br=[];Br[23]=1;Br[24]=2;Br[25]=3;Br[26]=5;Br[27]=9;function Jt(e,t,r){if(e.length-t<r)throw new Error(`${P} not enough data for type`)}var st=[24,256,65536,4294967296,BigInt("18446744073709551616")];function vt(e,t,r){Jt(e,t,1);let n=e[t];if(r.strict===!0&&n<st[0])throw new Error(`${P} integer encoded in more bytes than necessary (strict decode)`);return n}function Bt(e,t,r){Jt(e,t,2);let n=e[t]<<8|e[t+1];if(r.strict===!0&&n<st[1])throw new Error(`${P} integer encoded in more bytes than necessary (strict decode)`);return n}function Ct(e,t,r){Jt(e,t,4);let n=e[t]*16777216+(e[t+1]<<16)+(e[t+2]<<8)+e[t+3];if(r.strict===!0&&n<st[2])throw new Error(`${P} integer encoded in more bytes than necessary (strict decode)`);return n}function Tt(e,t,r){Jt(e,t,8);let n=e[t]*16777216+(e[t+1]<<16)+(e[t+2]<<8)+e[t+3],o=e[t+4]*16777216+(e[t+5]<<16)+(e[t+6]<<8)+e[t+7],i=(BigInt(n)<<BigInt(32))+BigInt(o);if(r.strict===!0&&i<st[3])throw new Error(`${P} integer encoded in more bytes than necessary (strict decode)`);if(i<=Number.MAX_SAFE_INTEGER)return Number(i);if(r.allowBigInt===!0)return i;throw new Error(`${P} integers outside of the safe integer range are not supported`)}function wa(e,t,r,n){return new N(g.uint,vt(e,t+1,n),2)}function Ea(e,t,r,n){return new N(g.uint,Bt(e,t+1,n),3)}function Sa(e,t,r,n){return new N(g.uint,Ct(e,t+1,n),5)}function Aa(e,t,r,n){return new N(g.uint,Tt(e,t+1,n),9)}function _t(e,t){return ft(e,0,t.value)}function ft(e,t,r){if(r<st[0]){let n=Number(r);e.push([t|n])}else if(r<st[1]){let n=Number(r);e.push([t|24,n])}else if(r<st[2]){let n=Number(r);e.push([t|25,n>>>8,n&255])}else if(r<st[3]){let n=Number(r);e.push([t|26,n>>>24&255,n>>>16&255,n>>>8&255,n&255])}else{let n=BigInt(r);if(n<st[4]){let o=[t|27,0,0,0,0,0,0,0],i=Number(n&BigInt(4294967295)),s=Number(n>>BigInt(32)&BigInt(4294967295));o[8]=i&255,i=i>>8,o[7]=i&255,i=i>>8,o[6]=i&255,i=i>>8,o[5]=i&255,o[4]=s&255,s=s>>8,o[3]=s&255,s=s>>8,o[2]=s&255,s=s>>8,o[1]=s&255,e.push(o)}else throw new Error(`${P} encountered BigInt larger than allowable range`)}}_t.encodedSize=function(t){return ft.encodedSize(t.value)};ft.encodedSize=function(t){return t<st[0]?1:t<st[1]?2:t<st[2]?3:t<st[3]?5:9};_t.compareTokens=function(t,r){return t.value<r.value?-1:t.value>r.value?1:0};function va(e,t,r,n){return new N(g.negint,-1-vt(e,t+1,n),2)}function Ba(e,t,r,n){return new N(g.negint,-1-Bt(e,t+1,n),3)}function Ca(e,t,r,n){return new N(g.negint,-1-Ct(e,t+1,n),5)}var Wo=BigInt(-1),Ta=BigInt(1);function Ia(e,t,r,n){let o=Tt(e,t+1,n);if(typeof o!="bigint"){let i=-1-o;if(i>=Number.MIN_SAFE_INTEGER)return new N(g.negint,i,9)}if(n.allowBigInt!==!0)throw new Error(`${P} integers outside of the safe integer range are not supported`);return new N(g.negint,Wo-BigInt(o),9)}function cn(e,t){let r=t.value,n=typeof r=="bigint"?r*Wo-Ta:r*-1-1;ft(e,t.type.majorEncoded,n)}cn.encodedSize=function(t){let r=t.value,n=typeof r=="bigint"?r*Wo-Ta:r*-1-1;return n<st[0]?1:n<st[1]?2:n<st[2]?3:n<st[3]?5:9};cn.compareTokens=function(t,r){return t.value<r.value?1:t.value>r.value?-1:0};function Cr(e,t,r,n){Jt(e,t,r+n);let o=Xe(e,t+r,t+r+n);return new N(g.bytes,o,r+n)}function _a(e,t,r,n){return Cr(e,t,1,r)}function Ua(e,t,r,n){return Cr(e,t,2,vt(e,t+1,n))}function La(e,t,r,n){return Cr(e,t,3,Bt(e,t+1,n))}function Da(e,t,r,n){return Cr(e,t,5,Ct(e,t+1,n))}function Ra(e,t,r,n){let o=Tt(e,t+1,n);if(typeof o=="bigint")throw new Error(`${P} 64-bit integer bytes lengths not supported`);return Cr(e,t,9,o)}function un(e){return e.encodedBytes===void 0&&(e.encodedBytes=e.type===g.string?ya(e.value):e.value),e.encodedBytes}function We(e,t){let r=un(t);ft(e,t.type.majorEncoded,r.length),e.push(r)}We.encodedSize=function(t){let r=un(t);return ft.encodedSize(r.length)+r.length};We.compareTokens=function(t,r){return Il(un(t),un(r))};function Il(e,t){return e.length<t.length?-1:e.length>t.length?1:ba(e,t)}function Tr(e,t,r,n,o){let i=r+n;Jt(e,t,i);let s=new N(g.string,ma(e,t+r,t+i),i);return o.retainStringBytes===!0&&(s.byteValue=Xe(e,t+r,t+i)),s}function Na(e,t,r,n){return Tr(e,t,1,r,n)}function ka(e,t,r,n){return Tr(e,t,2,vt(e,t+1,n),n)}function Ka(e,t,r,n){return Tr(e,t,3,Bt(e,t+1,n),n)}function Oa(e,t,r,n){return Tr(e,t,5,Ct(e,t+1,n),n)}function Va(e,t,r,n){let o=Tt(e,t+1,n);if(typeof o=="bigint")throw new Error(`${P} 64-bit integer string lengths not supported`);return Tr(e,t,9,o,n)}var Ma=We;function Je(e,t,r,n){return new N(g.array,n,r)}function Pa(e,t,r,n){return Je(e,t,1,r)}function Fa(e,t,r,n){return Je(e,t,2,vt(e,t+1,n))}function qa(e,t,r,n){return Je(e,t,3,Bt(e,t+1,n))}function Ha(e,t,r,n){return Je(e,t,5,Ct(e,t+1,n))}function $a(e,t,r,n){let o=Tt(e,t+1,n);if(typeof o=="bigint")throw new Error(`${P} 64-bit integer array lengths not supported`);return Je(e,t,9,o)}function za(e,t,r,n){if(n.allowIndefinite===!1)throw new Error(`${P} indefinite length items not allowed`);return Je(e,t,1,1/0)}function fn(e,t){ft(e,g.array.majorEncoded,t.value)}fn.compareTokens=_t.compareTokens;fn.encodedSize=function(t){return ft.encodedSize(t.value)};function Qe(e,t,r,n){return new N(g.map,n,r)}function Za(e,t,r,n){return Qe(e,t,1,r)}function Ga(e,t,r,n){return Qe(e,t,2,vt(e,t+1,n))}function Ya(e,t,r,n){return Qe(e,t,3,Bt(e,t+1,n))}function ja(e,t,r,n){return Qe(e,t,5,Ct(e,t+1,n))}function Xa(e,t,r,n){let o=Tt(e,t+1,n);if(typeof o=="bigint")throw new Error(`${P} 64-bit integer map lengths not supported`);return Qe(e,t,9,o)}function Wa(e,t,r,n){if(n.allowIndefinite===!1)throw new Error(`${P} indefinite length items not allowed`);return Qe(e,t,1,1/0)}function ln(e,t){ft(e,g.map.majorEncoded,t.value)}ln.compareTokens=_t.compareTokens;ln.encodedSize=function(t){return ft.encodedSize(t.value)};function Ja(e,t,r,n){return new N(g.tag,r,1)}function Qa(e,t,r,n){return new N(g.tag,vt(e,t+1,n),2)}function tc(e,t,r,n){return new N(g.tag,Bt(e,t+1,n),3)}function ec(e,t,r,n){return new N(g.tag,Ct(e,t+1,n),5)}function rc(e,t,r,n){return new N(g.tag,Tt(e,t+1,n),9)}function dn(e,t){ft(e,g.tag.majorEncoded,t.value)}dn.compareTokens=_t.compareTokens;dn.encodedSize=function(t){return ft.encodedSize(t.value)};var Nl=20,kl=21,Kl=22,Ol=23;function nc(e,t,r,n){if(n.allowUndefined===!1)throw new Error(`${P} undefined values are not supported`);return n.coerceUndefinedToNull===!0?new N(g.null,null,1):new N(g.undefined,void 0,1)}function oc(e,t,r,n){if(n.allowIndefinite===!1)throw new Error(`${P} indefinite length items not allowed`);return new N(g.break,void 0,1)}function Jo(e,t,r){if(r){if(r.allowNaN===!1&&Number.isNaN(e))throw new Error(`${P} NaN values are not supported`);if(r.allowInfinity===!1&&(e===1/0||e===-1/0))throw new Error(`${P} Infinity values are not supported`)}return new N(g.float,e,t)}function ic(e,t,r,n){return Jo(Qo(e,t+1),3,n)}function sc(e,t,r,n){return Jo(ti(e,t+1),5,n)}function ac(e,t,r,n){return Jo(lc(e,t+1),9,n)}function hn(e,t,r){let n=t.value;if(n===!1)e.push([g.float.majorEncoded|Nl]);else if(n===!0)e.push([g.float.majorEncoded|kl]);else if(n===null)e.push([g.float.majorEncoded|Kl]);else if(n===void 0)e.push([g.float.majorEncoded|Ol]);else{let o,i=!1;(!r||r.float64!==!0)&&(uc(n),o=Qo(Rt,1),n===o||Number.isNaN(n)?(Rt[0]=249,e.push(Rt.slice(0,3)),i=!0):(fc(n),o=ti(Rt,1),n===o&&(Rt[0]=250,e.push(Rt.slice(0,5)),i=!0))),i||(Vl(n),o=lc(Rt,1),Rt[0]=251,e.push(Rt.slice(0,9)))}}hn.encodedSize=function(t,r){let n=t.value;if(n===!1||n===!0||n===null||n===void 0)return 1;if(!r||r.float64!==!0){uc(n);let o=Qo(Rt,1);if(n===o||Number.isNaN(n))return 3;if(fc(n),o=ti(Rt,1),n===o)return 5}return 9};var cc=new ArrayBuffer(9),Ut=new DataView(cc,1),Rt=new Uint8Array(cc,0);function uc(e){if(e===1/0)Ut.setUint16(0,31744,!1);else if(e===-1/0)Ut.setUint16(0,64512,!1);else if(Number.isNaN(e))Ut.setUint16(0,32256,!1);else{Ut.setFloat32(0,e);let t=Ut.getUint32(0),r=(t&2139095040)>>23,n=t&8388607;if(r===255)Ut.setUint16(0,31744,!1);else if(r===0)Ut.setUint16(0,(e&2147483648)>>16|n>>13,!1);else{let o=r-127;o<-24?Ut.setUint16(0,0):o<-14?Ut.setUint16(0,(t&2147483648)>>16|1<<24+o,!1):Ut.setUint16(0,(t&2147483648)>>16|o+15<<10|n>>13,!1)}}}function Qo(e,t){if(e.length-t<2)throw new Error(`${P} not enough data for float16`);let r=(e[t]<<8)+e[t+1];if(r===31744)return 1/0;if(r===64512)return-1/0;if(r===32256)return NaN;let n=r>>10&31,o=r&1023,i;return n===0?i=o*2**-24:n!==31?i=(o+1024)*2**(n-25):i=o===0?1/0:NaN,r&32768?-i:i}function fc(e){Ut.setFloat32(0,e,!1)}function ti(e,t){if(e.length-t<4)throw new Error(`${P} not enough data for float32`);let r=(e.byteOffset||0)+t;return new DataView(e.buffer,r,4).getFloat32(0,!1)}function Vl(e){Ut.setFloat64(0,e,!1)}function lc(e,t){if(e.length-t<8)throw new Error(`${P} not enough data for float64`);let r=(e.byteOffset||0)+t;return new DataView(e.buffer,r,8).getFloat64(0,!1)}hn.compareTokens=_t.compareTokens;function z(e,t,r){throw new Error(`${P} encountered invalid minor (${r}) for major ${e[t]>>>5}`)}function pn(e){return()=>{throw new Error(`${P} ${e}`)}}var T=[];for(let e=0;e<=23;e++)T[e]=z;T[24]=wa;T[25]=Ea;T[26]=Sa;T[27]=Aa;T[28]=z;T[29]=z;T[30]=z;T[31]=z;for(let e=32;e<=55;e++)T[e]=z;T[56]=va;T[57]=Ba;T[58]=Ca;T[59]=Ia;T[60]=z;T[61]=z;T[62]=z;T[63]=z;for(let e=64;e<=87;e++)T[e]=_a;T[88]=Ua;T[89]=La;T[90]=Da;T[91]=Ra;T[92]=z;T[93]=z;T[94]=z;T[95]=pn("indefinite length bytes/strings are not supported");for(let e=96;e<=119;e++)T[e]=Na;T[120]=ka;T[121]=Ka;T[122]=Oa;T[123]=Va;T[124]=z;T[125]=z;T[126]=z;T[127]=pn("indefinite length bytes/strings are not supported");for(let e=128;e<=151;e++)T[e]=Pa;T[152]=Fa;T[153]=qa;T[154]=Ha;T[155]=$a;T[156]=z;T[157]=z;T[158]=z;T[159]=za;for(let e=160;e<=183;e++)T[e]=Za;T[184]=Ga;T[185]=Ya;T[186]=ja;T[187]=Xa;T[188]=z;T[189]=z;T[190]=z;T[191]=Wa;for(let e=192;e<=215;e++)T[e]=Ja;T[216]=Qa;T[217]=tc;T[218]=ec;T[219]=rc;T[220]=z;T[221]=z;T[222]=z;T[223]=z;for(let e=224;e<=243;e++)T[e]=pn("simple values are not supported");T[244]=z;T[245]=z;T[246]=z;T[247]=nc;T[248]=pn("simple values are not supported");T[249]=ic;T[250]=sc;T[251]=ac;T[252]=z;T[253]=z;T[254]=z;T[255]=oc;var Nt=[];for(let e=0;e<24;e++)Nt[e]=new N(g.uint,e,1);for(let e=-1;e>=-24;e--)Nt[31-e]=new N(g.negint,e,1);Nt[64]=new N(g.bytes,new Uint8Array(0),1);Nt[96]=new N(g.string,"",1);Nt[128]=new N(g.array,0,1);Nt[160]=new N(g.map,0,1);Nt[244]=new N(g.false,!1,1);Nt[245]=new N(g.true,!0,1);Nt[246]=new N(g.null,null,1);function dc(e){switch(e.type){case g.false:return Mt([244]);case g.true:return Mt([245]);case g.null:return Mt([246]);case g.bytes:return e.value.length?void 0:Mt([64]);case g.string:return e.value===""?Mt([96]):void 0;case g.array:return e.value===0?Mt([128]):void 0;case g.map:return e.value===0?Mt([160]):void 0;case g.uint:return e.value<24?Mt([Number(e.value)]):void 0;case g.negint:if(e.value>=-24)return Mt([31-Number(e.value)])}}var Pl={float64:!1,mapSorter:Hl,quickEncodeToken:dc};function Fl(){let e=[];return e[g.uint.major]=_t,e[g.negint.major]=cn,e[g.bytes.major]=We,e[g.string.major]=Ma,e[g.array.major]=fn,e[g.map.major]=ln,e[g.tag.major]=dn,e[g.float.major]=hn,e}var hc=Fl(),ei=new vr,yn=class e{constructor(t,r){this.obj=t,this.parent=r}includes(t){let r=this;do if(r.obj===t)return!0;while(r=r.parent);return!1}static createCheck(t,r){if(t&&t.includes(r))throw new Error(`${Xo} object contains circular references`);return new e(r,t)}},he={null:new N(g.null,null),undefined:new N(g.undefined,void 0),true:new N(g.true,!0),false:new N(g.false,!1),emptyArray:new N(g.array,0),emptyMap:new N(g.map,0)},pe={number(e,t,r,n){return!Number.isInteger(e)||!Number.isSafeInteger(e)?new N(g.float,e):e>=0?new N(g.uint,e):new N(g.negint,e)},bigint(e,t,r,n){return e>=BigInt(0)?new N(g.uint,e):new N(g.negint,e)},Uint8Array(e,t,r,n){return new N(g.bytes,e)},string(e,t,r,n){return new N(g.string,e)},boolean(e,t,r,n){return e?he.true:he.false},null(e,t,r,n){return he.null},undefined(e,t,r,n){return he.undefined},ArrayBuffer(e,t,r,n){return new N(g.bytes,new Uint8Array(e))},DataView(e,t,r,n){return new N(g.bytes,new Uint8Array(e.buffer,e.byteOffset,e.byteLength))},Array(e,t,r,n){if(!e.length)return r.addBreakTokens===!0?[he.emptyArray,new N(g.break)]:he.emptyArray;n=yn.createCheck(n,e);let o=[],i=0;for(let s of e)o[i++]=mn(s,r,n);return r.addBreakTokens?[new N(g.array,e.length),o,new N(g.break)]:[new N(g.array,e.length),o]},Object(e,t,r,n){let o=t!=="Object",i=o?e.keys():Object.keys(e),s=o?e.size:i.length;if(!s)return r.addBreakTokens===!0?[he.emptyMap,new N(g.break)]:he.emptyMap;n=yn.createCheck(n,e);let a=[],c=0;for(let d of i)a[c++]=[mn(d,r,n),mn(o?e.get(d):e[d],r,n)];return ql(a,r),r.addBreakTokens?[new N(g.map,s),a,new N(g.break)]:[new N(g.map,s),a]}};pe.Map=pe.Object;pe.Buffer=pe.Uint8Array;for(let e of"Uint8Clamped Uint16 Uint32 Int8 Int16 Int32 BigUint64 BigInt64 Float32 Float64".split(" "))pe[`${e}Array`]=pe.DataView;function mn(e,t={},r){let n=la(e),o=t&&t.typeEncoders&&t.typeEncoders[n]||pe[n];if(typeof o=="function"){let s=o(e,n,t,r);if(s!=null)return s}let i=pe[n];if(!i)throw new Error(`${Xo} unsupported type: ${n}`);return i(e,n,t,r)}function ql(e,t){t.mapSorter&&e.sort(t.mapSorter)}function Hl(e,t){let r=Array.isArray(e[0])?e[0][0]:e[0],n=Array.isArray(t[0])?t[0][0]:t[0];if(r.type!==n.type)return r.type.compare(n.type);let o=r.type.major,i=hc[o].compareTokens(r,n);return i===0&&console.warn("WARNING: complex key types used, CBOR key sorting guarantees are gone"),i}function pc(e,t,r,n){if(Array.isArray(t))for(let o of t)pc(e,o,r,n);else r[t.type.major](e,t,n)}function $l(e,t,r){let n=mn(e,r);if(!Array.isArray(n)&&r.quickEncodeToken){let o=r.quickEncodeToken(n);if(o)return o;let i=t[n.type.major];if(i.encodedSize){let s=i.encodedSize(n,r),a=new vr(s);if(i(a,n,r),a.chunks.length!==1)throw new Error(`Unexpected error: pre-calculated length for ${n} was wrong`);return jo(a.chunks[0])}}return ei.reset(),pc(ei,n,t,r),ei.toBytes(!0)}function ri(e,t){return t=Object.assign({},Pl,t),$l(e,hc,t)}var zl={strict:!1,allowIndefinite:!0,allowUndefined:!0,allowBigInt:!0},gn=class{constructor(t,r={}){this._pos=0,this.data=t,this.options=r}pos(){return this._pos}done(){return this._pos>=this.data.length}next(){let t=this.data[this._pos],r=Nt[t];if(r===void 0){let n=T[t];if(!n)throw new Error(`${P} no decoder for major type ${t>>>5} (byte 0x${t.toString(16).padStart(2,"0")})`);let o=t&31;r=n(this.data,this._pos,o,this.options)}return this._pos+=r.encodedLength,r}},Ir=Symbol.for("DONE"),xn=Symbol.for("BREAK");function Zl(e,t,r){let n=[];for(let o=0;o<e.value;o++){let i=tr(t,r);if(i===xn){if(e.value===1/0)break;throw new Error(`${P} got unexpected break to lengthed array`)}if(i===Ir)throw new Error(`${P} found array but not enough entries (got ${o}, expected ${e.value})`);n[o]=i}return n}function Gl(e,t,r){let n=r.useMaps===!0,o=n?void 0:{},i=n?new Map:void 0;for(let s=0;s<e.value;s++){let a=tr(t,r);if(a===xn){if(e.value===1/0)break;throw new Error(`${P} got unexpected break to lengthed map`)}if(a===Ir)throw new Error(`${P} found map but not enough entries (got ${s} [no key], expected ${e.value})`);if(n!==!0&&typeof a!="string")throw new Error(`${P} non-string keys not supported (got ${typeof a})`);if(r.rejectDuplicateMapKeys===!0&&(n&&i.has(a)||!n&&a in o))throw new Error(`${P} found repeat map key "${a}"`);let c=tr(t,r);if(c===Ir)throw new Error(`${P} found map but not enough entries (got ${s} [no value], expected ${e.value})`);n?i.set(a,c):o[a]=c}return n?i:o}function tr(e,t){if(e.done())return Ir;let r=e.next();if(r.type===g.break)return xn;if(r.type.terminal)return r.value;if(r.type===g.array)return Zl(r,e,t);if(r.type===g.map)return Gl(r,e,t);if(r.type===g.tag){if(t.tags&&typeof t.tags[r.value]=="function"){let n=tr(e,t);return t.tags[r.value](n)}throw new Error(`${P} tag not supported (${r.value})`)}throw new Error("unsupported")}function mc(e,t){if(!(e instanceof Uint8Array))throw new Error(`${P} data to decode must be a Uint8Array`);t=Object.assign({},zl,t);let r=t.tokenizer||new gn(e,t),n=tr(r,t);if(n===Ir)throw new Error(`${P} did not find any content to decode`);if(n===xn)throw new Error(`${P} got unexpected break`);return[n,e.subarray(r.pos())]}function ni(e,t){let[r,n]=mc(e,t);if(n.length>0)throw new Error(`${P} too many terminals, data makes no sense`);return r}var jl=Er("ipns:utils"),gc=Z("/ipns/"),Xl=114,Wl=0,Jl=18;function xc(e){let t;if(e.pubKey!=null)try{t=aa(e.pubKey)}catch(r){throw jl.error(r),r}if(t!=null)return t}function bc(e,t,r){let n=Z(t);return re([e,r,n])}function wc(e){let t=Z("ipns-signature:");return re([t,e])}function Ec(e){return"signatureV1"in e?At.encode({value:Z(e.value),signatureV1:e.signatureV1,validityType:e.validityType,validity:Z(e.validity),sequence:e.sequence,ttl:e.ttl,pubKey:e.pubKey,signatureV2:e.signatureV2,data:e.data}):At.encode({pubKey:e.pubKey,signatureV2:e.signatureV2,data:e.data})}function Sc(e){let t=At.decode(e);if(t.sequence!=null&&(t.sequence=BigInt(t.sequence)),t.ttl!=null&&(t.ttl=BigInt(t.ttl)),t.signatureV2==null||t.data==null)throw new Wt("Missing data or signatureV2");let r=Cc(t.data),n=Ql(r.Value),o=Q(r.Validity);if(t.value!=null&&t.signatureV1!=null)return td(t),{value:n,validityType:At.ValidityType.EOL,validity:o,sequence:r.Sequence,ttl:r.TTL,pubKey:t.pubKey,signatureV1:t.signatureV1,signatureV2:t.signatureV2,data:t.data};if(t.signatureV2!=null)return{value:n,validityType:At.ValidityType.EOL,validity:o,sequence:r.Sequence,ttl:r.TTL,pubKey:t.pubKey,signatureV2:t.signatureV2,data:t.data};throw new Error("invalid record: does not include signatureV1 or signatureV2")}function Ac(e){return re([gc,e.bytes])}function vc(e){let t=Nr(e.slice(gc.length));if(!yc(t,Wl)&&!yc(t,Jl))throw new Lr("Multihash in IPNS key was not identity or sha2-256");return t}function Bc(e,t,r,n,o){let i;if(t===At.ValidityType.EOL)i=0;else throw new Sr("The validity type is unsupported");return ri({Value:e,Validity:r,ValidityType:i,Sequence:n,TTL:o})}function Cc(e){let t=ni(e);if(t.ValidityType===0)t.ValidityType=At.ValidityType.EOL;else throw new Sr("The validity type is unsupported");return Number.isInteger(t.Sequence)&&(t.Sequence=BigInt(t.Sequence)),Number.isInteger(t.TTL)&&(t.TTL=BigInt(t.TTL)),t}function Ql(e){let t=Q(e).trim();if(t.startsWith("/"))return t;try{return`/ipfs/${ct.decode(e).toV1().toString()}`}catch{}try{return`/ipfs/${ct.parse(t).toV1().toString()}`}catch{}throw new Ar("Value must be a valid content path starting with /")}function Tc(e){if(e!=null){let t=nd(e);if(t!=null)return t.code===Xl?`/ipns/${t.toString(ee)}`:`/ipfs/${t.toV1().toString()}`;if(ed(e))return`/ipns/${ee.encode(e.bytes)}`;let r=e.toString().trim();if(r.startsWith("/")&&r.length>1)return r}throw new Ar("Value must be a valid content path starting with /")}function td(e){if(e.data==null)throw new sn("Record data is missing");let t=Cc(e.data);if(!yt(t.Value,e.value??new Uint8Array(0)))throw new Wt('Field "value" did not match between protobuf and CBOR');if(!yt(t.Validity,e.validity??new Uint8Array(0)))throw new Wt('Field "validity" did not match between protobuf and CBOR');if(t.ValidityType!==e.validityType)throw new Wt('Field "validityType" did not match between protobuf and CBOR');if(t.Sequence!==e.sequence)throw new Wt('Field "sequence" did not match between protobuf and CBOR');if(t.TTL!==e.ttl)throw new Wt('Field "ttl" did not match between protobuf and CBOR')}function ed(e){return e.bytes instanceof Uint8Array}function rd(e){return typeof e?.toCID=="function"}function nd(e){if(rd(e))return e.toCID();try{return ct.parse(e)}catch{}return ct.asCID(e)}function yc(e,t){return e.code===t}var od=Er("ipns"),ii=300*1e9,Ic="/ipns/",id=Ic.length,si={v1Compatible:!0,ttlNs:ii};async function sd(e,t,r,n,o=si){let i=new oi.default(Date.now()+Number(n)),s=At.ValidityType.EOL,a=BigInt(o.ttlNs??ii);return _c(e,t,r,s,i.toString(),a,o)}async function ad(e,t,r,n,o=si){let i=oi.default.fromString(n),s=At.ValidityType.EOL,a=BigInt(o.ttlNs??ii);return _c(e,t,r,s,i.toString(),a,o)}var _c=async(e,t,r,n,o,i,s=si)=>{r=BigInt(r);let a=Z(o),c=Tc(t),d=Z(c),u=Bc(d,n,a,r,i),f=wc(u),w=await e.sign(f),C;if(e.type==="RSA"&&(C=oe(e.publicKey)),s.v1Compatible===!0){let x=await cd(e,d,n,a),v={value:c,signatureV1:x,validity:o,validityType:n,sequence:r,ttl:i,signatureV2:w,data:u};return C!=null&&(v.pubKey=C),v}else{let x={value:c,validity:o,validityType:n,sequence:r,ttl:i,signatureV2:w,data:u};return C!=null&&(x.pubKey=C),x}},cd=async(e,t,r,n)=>{try{let o=bc(t,r,n);return await e.sign(o)}catch(o){throw od.error("record signature creation failed",o),new on("Record signature creation failed")}};return Oc(ud);})();
/*! Bundled license information:

@noble/hashes/utils.js:
  (*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/utils.js:
@noble/curves/abstract/modular.js:
@noble/curves/abstract/curve.js:
@noble/curves/abstract/edwards.js:
@noble/curves/ed25519.js:
@noble/curves/abstract/weierstrass.js:
@noble/curves/secp256k1.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)
*/
return Ipns}));
//# sourceMappingURL=index.min.js.map
